import{d as w,a as e,t as d,s as pe,c as X,e as ee,b as F}from"../chunks/disclose-version.BjBLbfIf.js";import{i as le}from"../chunks/legacy.b-VaXUeO.js";import{f as n,p as ne,c as l,r,t as j,a as ie,N as qe,s as v,n as V,g,q as Pe,l as je,b as Me,d as re,m as ve}from"../chunks/index-client.BoCi2Vgn.js";import{l as Y,s as me,p as oe,i as x}from"../chunks/props.Cy3ILhV4.js";import{C as _e,a as ke,b as Re,E as Be,c as Fe,d as Oe}from"../chunks/ErrorDisplay.B1ftezSC.js";import{C as Se}from"../chunks/TimeAgo.C_9SC1Gk.js";import{s as ce,c as ge,d as be,b as Te,e as $e,i as fe,a as ue,B as De}from"../chunks/index.DxvZjEHL.js";import{I as he,g as Ue}from"../chunks/index.Dvh8W8ZQ.js";import{c as Ce,p as Ve,a as Ge,b as Ke}from"../chunks/projects.C_-bKb6m.js";import{a as We,R as He}from"../chunks/RunsWithFilters.2MPxSGRr.js";import{s as we}from"../chunks/class.CemJQFJe.js";import{j as ye,h as Qe,P as Xe,p as Ye,e as Ze,a as et}from"../chunks/jobs.kVjF0r9V.js";import{a as Ne}from"../chunks/Loading.Cp3YBOHz.js";function Ee(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]);he(b,me({name:"circle-alert"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]],children:(i,c)=>{var s=w(),u=n(s);ce(u,a,"default",{},null),e(i,s)},$$slots:{default:!0}}))}function tt(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]);he(b,me({name:"circle-check"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(i,c)=>{var s=w(),u=n(s);ce(u,a,"default",{},null),e(i,s)},$$slots:{default:!0}}))}function at(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]);he(b,me({name:"circle-x"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(i,c)=>{var s=w(),u=n(s);ce(u,a,"default",{},null),e(i,s)},$$slots:{default:!0}}))}var st=d("<div><!></div>");function Ae(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]),t=Y(o,["class","variant"]);ne(a,!1);let i=oe(a,"class",8,void 0),c=oe(a,"variant",8,"default");le();var s=st();let u;var h=l(s);ce(h,a,"default",{},null),r(s),j(()=>u=ge(s,u,{class:be(We({variant:c()}),i()),...t,role:"alert"})),e(b,s),ie()}var rt=d("<div><!></div>");function Ie(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]),t=Y(o,["class"]);ne(a,!1);let i=oe(a,"class",8,void 0);le();var c=rt();let s;var u=l(c);ce(u,a,"default",{},null),r(c),j(()=>s=ge(c,s,{class:be("text-sm [&_p]:leading-relaxed",i()),...t})),e(b,c),ie()}function Le(b,a){const o=Y(a,["children","$$slots","$$events","$$legacy"]),t=Y(o,["class","level"]);ne(a,!1);let i=oe(a,"class",8,void 0),c=oe(a,"level",8,"h5");le();var s=w(),u=n(s);Te(u,c,!1,(h,f)=>{let R;j(()=>R=ge(h,R,{class:be("mb-1 font-medium leading-none tracking-tight",i()),...t},void 0,h.namespaceURI===qe,h.nodeName.includes("-")));var p=w(),S=n(p);ce(S,a,"default",{},null),e(f,p)}),e(b,s),ie()}var ot=d("<!> <!> <!>",1),lt=d('<div class="absolute top-0 h-4 bg-red-500"></div>'),nt=d('<div class="absolute top-0 h-4 bg-yellow-500 progress-stripe svelte-i2gyqw"></div>'),it=d('<div class="absolute top-0 h-4 bg-green-600"></div>'),dt=d('<span class="inline-flex items-center gap-1"><div></div> </span>'),ct=d('<div class="text-sm text-gray-500 flex flex-wrap gap-2"></div>'),vt=d('<div class="w-full bg-gray-200 rounded-sm h-4 dark:bg-gray-700 relative overflow-hidden"><div class="h-4 transition-all duration-300 bg-blue-600 relative overflow-hidden progress-stripe rounded-r-sm svelte-i2gyqw"></div> <!></div> <div class="flex justify-between mt-1 text-sm text-gray-500"><div class="flex"><!></div> <div class="flex gap-8"><span> </span> <span> </span></div></div>',1),ut=d('<div class="mt-2"><!></div>'),_t=d('<div class="border rounded-lg p-4 bg-gray-50"><div class="flex items-center gap-4"><span class="font-medium">Latest Run:</span> <span> </span> <span> </span></div> <!></div>');function $t(b,a){ne(a,!1);const o=pe(),t=()=>X(ye,"$jobStore",o);le();var i=w(),c=n(i);x(c,()=>t().currentJob,s=>{var u=_t(),h=l(u),f=v(l(h),2),R=l(f,!0);j(()=>F(R,t().currentJob.slice(-8))),r(f);var p=v(f,2),S=l(p);r(p),r(h);var G=v(h,2);x(G,()=>t().jobDetails,K=>{var W=ut(),J=l(W);x(J,()=>(!t().jobDetails.task_status_map||Object.keys(t().jobDetails.task_status_map).length===0)&&!t().jobStatus,te=>{Ae(te,{variant:"destructive",class:"mt-2",children:(O,ae)=>{var _=ot(),P=n(_);Ee(P,{class:"h-4 w-4"});var D=v(P,2);Le(D,{children:(m,N)=>{V();var $=ee("Experiment Failed");e(m,$)},$$slots:{default:!0}});var C=v(D,2);Ie(C,{children:(m,N)=>{V();var $=ee("No task status information available. The experiment may have failed to start properly.");e(m,$)},$$slots:{default:!0}}),e(O,_)},$$slots:{default:!0}})},te=>{var O=vt(),ae=n(O),_=l(ae),P=v(_,2);x(P,()=>t().jobDetails.task_status_map,k=>{var y=w(),Q=n(y);$e(Q,1,()=>Object.entries(t().jobDetails.task_status_map),fe,(T,E,q)=>{let A=()=>g(E)[1];var U=w(),Z=n(U);x(Z,()=>A()==="failed",I=>{var M=lt();j(()=>ue(M,"style",`width: ${100/t().jobDetails.total_tasks}%; left: ${q/t().jobDetails.total_tasks*100}%`)),e(I,M)},I=>{var M=w(),B=n(M);x(B,()=>A()==="evaluating",de=>{var se=nt();j(()=>ue(se,"style",`width: ${100/t().jobDetails.total_tasks}%; left: ${q/t().jobDetails.total_tasks*100}%`)),e(de,se)},de=>{var se=w(),Je=n(se);x(Je,()=>A()==="completed",ze=>{var xe=it();j(()=>ue(xe,"style",`width: ${100/t().jobDetails.total_tasks}%; left: ${q/t().jobDetails.total_tasks*100}%`)),e(ze,xe)},null,!0),e(de,se)},!0),e(I,M)}),e(T,U)}),e(k,y)}),r(ae);var D=v(ae,2),C=l(D),m=l(C);x(m,()=>t().jobDetails.task_status_map,k=>{var y=ct();$e(y,5,()=>Object.entries(t().taskStatusCounts),fe,(Q,T)=>{let E=()=>g(T)[0],q=()=>g(T)[1];var A=w(),U=n(A);x(U,()=>q()>0,Z=>{var I=dt(),M=l(I),B=v(M);r(I),j(()=>{we(M,`w-2 h-2 rounded-full ${(E()==="completed"?"bg-green-500":E()==="running"?"bg-blue-500":E()==="evaluating"?"bg-yellow-500":E()==="failed"?"bg-red-500":"bg-gray-500")??""}`),F(B,` ${E()??""}: ${q()??""}`)}),e(Z,I)}),e(Q,A)}),r(y),e(k,y)}),r(C);var N=v(C,2),$=l(N),L=l($);r($);var z=v($,2),H=l(z);j(()=>{var k,y;return F(H,`${(t().jobStatus==="completed"?"100":Math.round((((k=t().jobDetails)==null?void 0:k.current_task)||0)/(((y=t().jobDetails)==null?void 0:y.total_tasks)||1)*100))??""}%`)}),r(z),r(N),r(D),j(()=>{var k,y;ue(_,"style",`width: ${(t().jobStatus==="completed"?"100":t().jobDetails.current_task/t().jobDetails.total_tasks*100)??""}%;`),F(L,`${(((k=t().jobDetails)==null?void 0:k.current_task)||0)??""} / ${(((y=t().jobDetails)==null?void 0:y.total_tasks)||0)??""}`)}),e(te,O)}),r(W),e(K,W)}),r(u),j(()=>{we(p,`${`text-gray-500 ${t().jobStatus==="failed"?"text-red-500":""}`??""} svelte-i2gyqw`),F(S,`Status: ${t().jobStatus??""}`)}),e(s,u)}),e(b,i),ie()}var ft=d('<div class="flex items-center gap-2"><!> <span class="text-gray-500"> </span></div>'),pt=d("<!> Run Experiment",1),mt=d("<div><!></div>");function gt(b,a){ne(a,!1);const o=pe(),t=()=>X(ye,"$jobStore",o),i=()=>X(Ce,"$selectedProjectId",o);let c=oe(a,"reloadRecentRuns",8);le();var s=mt(),u=l(s);x(u,()=>t().currentJob&&t().jobStatus&&!["completed","failed","error"].includes(t().jobStatus),h=>{var f=ft(),R=l(f);Ne(R,{class:"h-4 w-4 animate-spin"});var p=v(R,2),S=l(p,!0);r(p),r(f),j(()=>F(S,t().jobStatus)),e(h,f)},h=>{De(h,{variant:"primary",class:"flex items-center gap-2",$$events:{click:()=>Qe(i(),c())},children:(f,R)=>{var p=pt(),S=n(p);Xe(S,{class:"h-4 w-4"}),V(),e(f,p)},$$slots:{default:!0}})}),r(s),e(b,s),ie()}var bt=d("<!> <!> <!>",1),ht=d("<!> <!>",1);function yt(b,a){ne(a,!1);let o=oe(a,"alerts",24,()=>[]);le();var t=w(),i=n(t);x(i,()=>o().length>0,c=>{_e(c,{children:(s,u)=>{var h=ht(),f=n(h);ke(f,{children:(p,S)=>{Re(p,{children:(G,K)=>{V();var W=ee("Key Alerts and Notifications");e(G,W)},$$slots:{default:!0}})},$$slots:{default:!0}});var R=v(f,2);Se(R,{class:"space-y-4",children:(p,S)=>{var G=w(),K=n(G);$e(K,1,o,fe,(W,J)=>{var te=Pe(()=>g(J).type==="improvement"?"default":"destructive");Ae(W,{get variant(){return g(te)},children:(O,ae)=>{var _=bt(),P=n(_);x(P,()=>g(J).type==="regression",m=>{Ee(m,{class:"h-4 w-4"})},m=>{var N=w(),$=n(N);x($,()=>g(J).type==="security",L=>{at(L,{class:"h-4 w-4"})},L=>{var z=w(),H=n(z);x(H,()=>g(J).type==="improvement",k=>{tt(k,{class:"h-4 w-4"})},null,!0),e(L,z)},!0),e(m,N)});var D=v(P,2);Le(D,{children:(m,N)=>{V();var $=ee();j(()=>F($,g(J).type.charAt(0).toUpperCase()+g(J).type.slice(1))),e(m,$)},$$slots:{default:!0}});var C=v(D,2);Ie(C,{children:(m,N)=>{V();var $=ee();j(()=>F($,g(J).message)),e(m,$)},$$slots:{default:!0}}),e(O,_)},$$slots:{default:!0}})}),e(p,G)},$$slots:{default:!0}}),e(s,h)},$$slots:{default:!0}})}),e(b,t),ie()}var xt=d('<div class="flex items-center justify-center h-[50vh] text-gray-500"><div class="flex items-center gap-2"><!> <span>Loading project details...</span></div></div>'),jt=d('<div class="flex items-center justify-center h-[50vh] text-gray-500"><!></div>'),wt=d("<!> <!>",1),Pt=d("<!> <!>",1),kt=d('<div class="flex items-center justify-center h-[50vh] text-gray-500"><!></div>'),Rt=d('<span class="text-md font-medium">Total Runs</span> <div class="text-2xl font-bold"> </div>',1),St=d('<div class="flex justify-between items-center"><h1 class="text-3xl font-bold -mb-2 -mt-2"> </h1> <!></div> <!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><!></div> <!> <!>',1),Dt=d('<div class="container mx-auto p-4 space-y-6"><!></div>');function Tt(b,a){ne(a,!1);const o=pe(),t=()=>X(Ke,"$projects",o),i=()=>X(Ce,"$selectedProjectId",o),c=()=>X(ye,"$jobStore",o),s=()=>X(et,"$pendingRunStore",o),u=()=>X(Ve,"$projectsLoading",o),h=()=>X(Ge,"$projectsError",o),f=ve();let R=ve([]),p=ve(null),S=ve(!1),G=ve(0);async function K(){re(S,!0),re(p,null);try{const _=await Ue(i());re(R,_.runs),re(G,_.total)}catch(_){console.error("Error loading recent runs:",_),re(p,_ instanceof Error?_.message:"Unknown error")}finally{re(S,!1)}}async function W(){c().currentJob&&c().jobStatus&&!["completed","failed","error"].includes(c().jobStatus)&&await Ye(i(),c().currentJob,K)}async function J(){s()&&await Ze(K)}const te=[];je(()=>(t(),i()),()=>{re(f,t().find(_=>_.id===i()))}),je(()=>g(f),()=>{g(f)&&(K(),W(),J())}),Me(),le();var O=Dt(),ae=l(O);x(ae,u,_=>{var P=xt(),D=l(P),C=l(D);Ne(C,{class:"h-6 w-6 animate-spin"}),V(2),r(D),r(P),e(_,P)},_=>{var P=w(),D=n(P);x(D,h,C=>{var m=jt(),N=l(m),$=Pe(()=>`${h()} - Check if API is running`);Be(N,{get errorMessage(){return g($)},onRetry:()=>window.location.reload(),className:"w-96"}),r(m),e(C,m)},C=>{var m=w(),N=n(m);x(N,()=>!g(f),$=>{var L=kt(),z=l(L);_e(z,{class:"border-yellow-200 bg-yellow-50 w-96 space-y-4",children:(H,k)=>{var y=Pt(),Q=n(y);ke(Q,{children:(E,q)=>{var A=wt(),U=n(A);Re(U,{class:"text-yellow-800",children:(I,M)=>{V();var B=ee("Project Not Found");e(I,B)},$$slots:{default:!0}});var Z=v(U,2);Fe(Z,{class:"text-yellow-600 pt-2",children:(I,M)=>{V();var B=ee();j(()=>F(B,`The project "${i()??""}" could not be found.`)),e(I,B)},$$slots:{default:!0}}),e(E,A)},$$slots:{default:!0}});var T=v(Q,2);Oe(T,{class:"flex justify-end",children:(E,q)=>{De(E,{variant:"outline",class:"border-yellow-200 text-yellow-800 hover:bg-yellow-100",$$events:{click:()=>window.location.href="/"},children:(A,U)=>{V();var Z=ee("Go Back");e(A,Z)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(H,y)},$$slots:{default:!0}}),r(L),e($,L)},$=>{var L=St(),z=n(L),H=l(z),k=l(H,!0);r(H);var y=v(H,2);gt(y,{reloadRecentRuns:K}),r(z);var Q=v(z,2);$t(Q,{});var T=v(Q,2),E=l(T);_e(E,{children:(U,Z)=>{Se(U,{class:"flex items-center justify-between py-4",children:(I,M)=>{var B=Rt(),de=v(n(B),2),se=l(de,!0);r(de),j(()=>F(se,g(G))),e(I,B)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(T);var q=v(T,2);He(q,{get runsList(){return g(R)},get isLoading(){return g(S)},get loadingError(){return g(p)},showViewAll:!0});var A=v(q,2);yt(A,{alerts:te}),j(()=>F(k,g(f).name)),e($,L)},!0),e(C,m)},!0),e(_,P)}),r(O),e(b,O),ie()}export{Tt as component};

import{I as h,_ as V}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-wa_5O_h6.js";import{c as I}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_ea20d839_lang-Cfo9s-Sj.js";import{x as C,r as D,c as x,y as a,D as p,n as u,z as d,A as r,K as c,F as g,E as A,G as y,S as w,J as _,B as E,U as T,I as k,w as B,o as M,ag as N,b as $}from"./index-DuDRe8hE.js";import{C as L}from"./Container-CQhyPPl2.js";import{T as S}from"./Toolbar-CibNv11m.js";import{V as U,a as F}from"./VList-BlpguAX2.js";import{k as z}from"./VListItem-CuoSvcqW.js";import{a as G}from"./VChip-BRQkwjNJ.js";import"./ProviderIcon.vue_vue_type_script_setup_true_lang-CHFYJo9W.js";import"./VMenu-B49kEbTj.js";import"./marquee_text_sync-DCD_29QD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VCard-Cf5RelEw.js";import"./VCardText-Dn8Yf3BC.js";import"./VDialog-BsvLwk-0.js";import"./VTooltip-aHjUkPs6.js";import"./layout-qserhqCM.js";import"./ListItem-xrpNnThP.js";import"./eventbus-CGRXT3Tn.js";import"./VContainer-CCoTeKDA.js";/* empty css              */import"./VToolbar-Dhcm-C4i.js";const H={style:{"margin-bottom":"10px"}},J={style:{"margin-left":"15px"}},K={key:0},P=C({__name:"Chapters",props:{itemDetails:{}},setup(f){const i=f,s=D(!1),e=function(){s.value=!s.value},v=x(()=>[{label:"tooltip.collapse_expand",icon:s.value?"mdi-chevron-up":"mdi-chevron-down",action:e,overflowAllowed:!1}]),n=function(t){!i.itemDetails||!I(i.itemDetails)||k.playMedia(i.itemDetails.uri,void 0,void 0,t.position.toString())};return(t,l)=>(a(),p("section",H,[u(S,{title:t.$t("chapters"),"menu-items":v.value,onTitleClicked:e},null,8,["title","menu-items"]),u(U),s.value?(a(),d(L,{key:0},{default:r(()=>[u(F,null,{default:r(()=>{var m,b;return[(a(!0),p(g,null,A((b=(m=t.itemDetails)==null?void 0:m.metadata)==null?void 0:b.chapters,o=>(a(),d(z,{key:o.position,disabled:!y(I)(t.itemDetails),onClick:j=>n(o)},{prepend:r(()=>[u(G,null,{default:r(()=>[w(_(o.position),1)]),_:2},1024)]),title:r(()=>[E("div",J,_(o.name),1)]),append:r(()=>[o.end?(a(),p("span",K,_(y(T)(o.end-o.start)),1)):c("",!0)]),_:2},1032,["disabled","onClick"]))),128))]}),_:1})]),_:1})):c("",!0)]))}}),fe=C({__name:"AudiobookDetails",props:{itemId:{},provider:{}},setup(f){const i=f,s=D(!1),e=D(),v=async function(){e.value=await k.getAudiobook(i.itemId,i.provider)};return B(()=>i.itemId,n=>{n&&v()},{immediate:!0}),M(()=>{const n=k.subscribe(N.MEDIA_ITEM_UPDATED,t=>{var m;const l=t.data;((m=e.value)==null?void 0:m.uri)==l.uri&&(s.value=!0)});$(n)}),(n,t)=>{var l;return a(),p(g,null,[u(h,{item:e.value},null,8,["item"]),e.value&&((l=e.value.metadata)!=null&&l.chapters)?(a(),d(P,{key:0,"item-details":e.value},null,8,["item-details"])):c("",!0),e.value?(a(),d(V,{key:1,"item-details":e.value},null,8,["item-details"])):c("",!0)],64)}}});export{fe as default};

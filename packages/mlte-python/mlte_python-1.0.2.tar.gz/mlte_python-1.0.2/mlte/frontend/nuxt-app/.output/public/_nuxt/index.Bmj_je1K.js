import{_ as ae}from"./nuxt-link.D_nq_x-v.js";import{n as oe,u as D,r as c,v as P,q as y,A as se,w as i,B as le,o as m,d as p,a,b as n,y as o,C as N,D as j,t as x,c as w,s as F,F as J,x as Q,z as ie}from"./entry.CcvhsfqQ.js";import{r as R,h as S}from"./http-error-handling.BbcmLHJS.js";import{i as ne,a as re,b as de,c as ue,d as ce}from"./artifact-validation.BNGJNruX.js";const pe=a("title",null,"Artifact Store",-1),me={style:{display:"flex"}},he={class:"model-version-div"},_e=a("br",null,null,-1),ve={class:"model-version-div"},be=a("br",null,null,-1),fe=a("div",null,null,-1),ye={class:"scrollable-table-div"},we=a("p",null," A negotiation card is a document with a series of discussion points to be documented during a negotiation between all project stakeholders at the project's outset. It is then used as a reference throughout development and is updated at prescribed negotiation points. ",-1),Ve={class:"table usa-table usa-table--borderless"},ge=a("thead",null,[a("tr",null,[a("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),a("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),a("th",{scope:"col"},"Actions")])],-1),Ee={scope:"row"},Ae={key:0,style:{float:"left",color:"red"}},ke={class:"scrollable-table-div"},xe=a("p",null," A report is a human and machine-readable summary of all knowledge gained about a model during the MLTE process. ",-1),Re={class:"table usa-table usa-table--borderless"},Se=a("thead",null,[a("tr",null,[a("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),a("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),a("th",{scope:"col"},"Actions")])],-1),Te={scope:"row"},Ue={key:0,style:{float:"left",color:"red"}},Ie={class:"scrollable-table-div"},qe=a("p",null," A specification (spec) defines the model requirements that must be satisfied to ensure successful integration with the target system. ",-1),Ce={class:"scrollable-table-div"},Me=a("p",null," Validated Specification are produced by combining a specification with its corresponding results; this artifact communicates how well a model performed against all of its requirements. ",-1),Le={class:"scrollable-table-div"},Be=a("p",null," Values are the atomic unit of model evaluation in MLTE. A value is any artifact produced by a MLTE measurement for the purposes of model evaluation. ",-1),Oe=oe({__name:"index",async setup($e){let h,_;const V=ie(),g=D("token"),v=c(""),b=c(""),E=c([]),f=c([]),U=c([]),r=D("selectedModel",{decode:!1});r.value=r.value||"";const u=D("selectedVersion",{decode:!1});u.value=u.value||"";const W=c([{id:"id",label:"ID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),X=c([{id:"id",label:"ID",sortable:!0},{id:"specid",label:"SpecID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),Y=c([{id:"id",label:"ID",sortable:!0},{id:"measurement",label:"Measurement",sortable:!0},{id:"type",label:"Type",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),I=c([]),q=c([]),C=c([]),M=c([]),L=c([]);[h,_]=P(()=>z()),await h,_(),E.value!==null&&(E.value.map(e=>e.value).includes(r.value)||(r.value="",u.value=""),r.value!==""&&([h,_]=P(()=>B(r.value,!1)),await h,_(),f.value.map(d=>d.value).includes(u.value)||(u.value=""),u.value!==""&&([h,_]=P(()=>H(u.value)),await h,_())));async function z(){await $fetch(V.public.apiPath+"/user/me/models/",{retry:0,method:"GET",headers:{Authorization:"Bearer "+g.value},onRequestError(){R()},onResponse({response:s}){s.ok&&(U.value=s._data)},onResponseError({response:s}){S(s.status,s._data.error_description)}}),E.value=[],U.value&&U.value.forEach(s=>{E.value.push({value:s,text:s})})}async function B(s,e){if(r.value=s,e&&(u.value=""),s===""){f.value=[],T();return}await $fetch(V.public.apiPath+"/model/"+s+"/version",{retry:0,method:"GET",headers:{Authorization:"Bearer "+g.value},onRequestError(){R()},onResponse({response:d}){d.ok&&d._data&&(T(),r.value=s,f.value=[],d._data.forEach(t=>{f.value.push({value:t,text:t})}))},onResponseError({response:d}){S(d.status,d._data.error_description)}}),f.value.sort(function(d,t){return d.value<t.value?-1:d.value>t.value?1:0})}async function H(s){if(u.value=s,s===""){T();return}await $fetch(V.public.apiPath+"/model/"+r.value+"/version/"+s+"/artifact",{retry:0,method:"GET",headers:{Authorization:"Bearer "+g.value},onRequestError(){R()},onResponse({response:e}){e.ok&&e._data&&(u.value=s,Z(r.value,u.value,e._data))},onResponseError({response:e}){S(e.status,e._data.error_description)}})}function Z(s,e,d){T(),d.forEach(t=>{t.header.timestamp=new Date(t.header.timestamp*1e3).toLocaleString("en-US"),t.header.type==="negotiation_card"?ne(t)&&I.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:s,version:e}):t.header.type==="report"?re(t)&&C.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:s,version:e}):t.header.type==="spec"?de(t)&&q.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:s,version:e}):t.header.type==="validated_spec"&&ue(t)&&M.value.push({id:t.header.identifier,specid:t.body.spec_identifier,timestamp:t.header.timestamp,model:s,version:e}),t.header.type==="value"&&ce(t)&&L.value.push({id:t.header.identifier.slice(0,-6),measurement:t.body.metadata.measurement_type,type:t.body.value.value_type,timestamp:t.header.timestamp,model:s,version:e})})}function T(){I.value=[],C.value=[],q.value=[],M.value=[],L.value=[]}async function O(s){try{await $fetch(V.public.apiPath+"/model/",{retry:0,method:"POST",headers:{Authorization:"Bearer "+g.value},body:{identifier:s},onRequestError(){R()},onResponse({response:e}){e.ok&&(z(),alert(`Model, ${s} has been created.`),v.value="")},onResponseError({response:e}){S(e.status,e._data.error_description)}})}catch{}}async function G(s,e){try{await $fetch(V.public.apiPath+"/model/"+s+"/version",{retry:0,method:"POST",headers:{Authorization:"Bearer "+g.value},body:{identifier:e},onRequestError(){R()},onResponse({response:d}){d.ok&&(B(s,!1),alert(`Version, ${e} for model, ${s} has been created`),b.value="")},onResponseError({response:d}){S(d.status,d._data.error_description)}})}catch{}}return(s,e)=>{const d=y("UsaTextInput"),t=y("UsaButton"),K=y("UsaSelect"),A=ae,k=y("UsaAccordionItem"),$=y("UsaTable"),ee=y("UsaAccordion"),te=le;return m(),se(te,{name:"base-layout"},{"page-title":i(()=>[p("Artifact Store")]),"right-sidebar":i(()=>[a("div",null,[n(d,{modelValue:o(v),"onUpdate:modelValue":e[0]||(e[0]=l=>N(v)?v.value=l:null),onKeyup:e[1]||(e[1]=j(l=>O(o(v)),["enter"]))},{label:i(()=>[p(" New Model ")]),_:1},8,["modelValue"]),n(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[2]||(e[2]=l=>O(o(v)))},{default:i(()=>[p(" Create Model ")]),_:1}),n(d,{modelValue:o(b),"onUpdate:modelValue":e[3]||(e[3]=l=>N(b)?b.value=l:null),disabled:o(r)==="",onKeyup:e[4]||(e[4]=j(l=>G(o(r),o(b)),["enter"]))},{label:i(()=>[p(" New Version for: "+x(o(r)),1)]),_:1},8,["modelValue","disabled"]),n(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[5]||(e[5]=l=>G(o(r),o(b)))},{default:i(()=>[p(" Create Version ")]),_:1})])]),default:i(()=>[pe,a("div",me,[a("div",he,[n(K,{options:o(E),"model-value":o(r),"onUpdate:modelValue":e[6]||(e[6]=l=>B(l,!0))},{label:i(()=>[p("Model")]),_:1},8,["options","model-value"]),_e]),a("div",ve,[n(K,{options:o(f),"model-value":o(u),"onUpdate:modelValue":e[7]||(e[7]=l=>H(l))},{label:i(()=>[p("Version")]),_:1},8,["options","model-value"]),be]),fe]),n(ee,{multiselectable:"",bordered:""},{default:i(()=>[n(k,{label:"Negotiation Cards"},{default:i(()=>[a("div",ye,[we,a("table",Ve,[ge,a("tbody",null,[(m(!0),w(J,null,F(o(I),l=>(m(),w("tr",{key:l.id},[a("th",Ee,x(l.id),1),a("td",null,x(l.timestamp),1),a("td",null,[n(A,{to:{path:"/negotiation-card",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),n(A,{to:{path:"/negotiation-card",query:{model:o(r),version:o(u)}}},{default:i(()=>[n(t,{disabled:o(r)===""||o(u)==="",class:"primary-button",style:{float:"left"}},{default:i(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),o(r)===""||o(u)===""?(m(),w("p",Ae," Select a model and version to start a new negotiation card here. ")):Q("",!0)])]),_:1}),n(k,{label:"Reports"},{default:i(()=>[a("div",ke,[xe,a("table",Re,[Se,a("tbody",null,[(m(!0),w(J,null,F(o(C),l=>(m(),w("tr",{key:l.id},[a("th",Te,x(l.id),1),a("td",null,x(l.timestamp),1),a("td",null,[n(A,{to:{path:"/report-form",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"]),n(A,{target:"_blank",to:{path:"/report-export",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Export ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),n(A,{to:{path:"/report-form",query:{model:o(r),version:o(u)}}},{default:i(()=>[n(t,{disabled:o(r)===""||o(u)==="",class:"primary-button",style:{float:"left"}},{default:i(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),o(r)===""||o(u)===""?(m(),w("p",Ue," Select a model and version to start a new report. ")):Q("",!0)])]),_:1}),n(k,{label:"Specifications"},{default:i(()=>[a("div",Ie,[qe,n($,{headers:o(W),rows:o(q),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),n(k,{label:"Validated Specification"},{default:i(()=>[a("div",Ce,[Me,n($,{headers:o(X),rows:o(M),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),n(k,{label:"Values"},{default:i(()=>[a("div",Le,[Be,n($,{headers:o(Y),rows:o(L),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1})]),_:1})]),_:1})}}});export{Oe as default};

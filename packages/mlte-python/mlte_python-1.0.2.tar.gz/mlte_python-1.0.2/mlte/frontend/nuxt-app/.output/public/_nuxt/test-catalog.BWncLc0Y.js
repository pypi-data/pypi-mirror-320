import{n as L,q as x,o as y,c as v,F as O,s as D,a as n,t as E,x as S,b as l,w as a,d as o,_ as Q,A as G,u as K,r as g,v as W,y as p,z as Z,B as X,C as A,D as j}from"./entry.CcvhsfqQ.js";import{_ as Y}from"./info-icon.DYvDc9G1.js";import{u as ee}from"./fetch.Bvj9IF8C.js";import{r as te}from"./util.xiPO2uKL.js";import{i as ae}from"./form-methods.D-YS39W_.js";import{r as U,h as $}from"./http-error-handling.BbcmLHJS.js";const oe={class:"table usa-table usa-table--borderless"},le=n("thead",null,[n("tr",null,[n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Identifier"),n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Catalog"),n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Tags"),n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property Category"),n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Code Type"),n("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Actions")])],-1),ne={key:0},re=L({__name:"entry-list",props:{modelValue:{type:Array,required:!0,default:[]}},emits:["addEntry","editEntry","deleteEntry"],setup(s,{emit:_}){return(m,V)=>{const i=x("UsaButton");return y(),v("table",oe,[le,(y(!0),v(O,null,D(s.modelValue,(u,b)=>(y(),v("tr",{key:b},[n("td",null,E(u.header.identifier),1),n("td",null,E(u.header.catalog_id),1),n("td",null,[(y(!0),v(O,null,D(u.tags,(f,d)=>(y(),v("span",{key:d},[n("span",null,E(f),1),d+1<u.tags.length?(y(),v("span",ne,", ")):S("",!0)]))),128))]),n("td",null,E(u.property_category),1),n("td",null,E(u.code_type),1),n("td",null,[l(i,{class:"secondary-button",onClick:f=>m.$emit("editEntry",u)},{default:a(()=>[o(" Edit ")]),_:2},1032,["onClick"]),l(i,{class:"usa-button usa-button--secondary",onClick:f=>m.$emit("deleteEntry",u.header.catalog_id,u.header.identifier)},{default:a(()=>[o(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),se="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%201H4c-1.1%200-2%20.9-2%202v14h2V3h12V1zm3%204H8c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h11c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2zm0%2016H8V7h11v14z'/%3e%3c/svg%3e",ie={},ue=n("img",{src:se,class:"inline-icon usa-icon"},null,-1);function de(s,_){const m=x("UsaButton");return y(),G(m,{variant:"unstyled",class:"inline-icon"},{default:a(()=>[ue]),_:1})}const ce=Q(ie,[["render",de]]),me={key:0},pe={class:"section-header"},ye=n("h3",{style:{display:"inline"}},"Created by:",-1),fe={key:1},he={class:"multi-line-checkbox-div"},ve={class:"usa-label"},ge={class:"submit-footer"},_e=L({__name:"entry-edit",props:{modelValue:{type:Object,required:!0,default:{header:{identifier:"",creator:"",created:-1,updated:-1,catalog_id:""},tags:[],property_category:"",property:"",code_type:"",code:"",description:"",inputs:"",output:""}},newEntryFlag:{type:Boolean,required:!0,default:!1}},emits:["cancel","submit","updateEntry"],async setup(s,{emit:_}){let m,V;const i=s,u=Z(),b=K("token"),f=g("");f.value=new Date(i.modelValue.header.created*1e3).toLocaleString("en-US");const d=g({catalog:!1,identifier:!1,code_type:!1}),C=g([]),{data:T}=([m,V]=W(()=>ee(u.public.apiPath+"/catalogs",{method:"GET",headers:{Authorization:"Bearer "+b.value}},"$73CHxE7yZg")),m=await m,V(),m);T.value&&T.value.forEach(t=>{t.read_only||C.value.push({value:t.id,text:t.id+" ("+t.type.replaceAll("_"," ")+")"})});const R=g([{name:"Audio Analysis",selected:!1},{name:"Classification",selected:!1},{name:"Computer Vision",selected:!1},{name:"Decoder",selected:!1},{name:"Encoder",selected:!1},{name:"General",selected:!1},{name:"Generative Model",selected:!1},{name:"Infrared",selected:!1},{name:"NLP",selected:!1},{name:"Object Detection",selected:!1},{name:"Sentiment Analysis",selected:!1},{name:"Regression",selected:!1},{name:"Segmentation",selected:!1},{name:"Tabular",selected:!1},{name:"Time Series",selected:!1}]),B=g([{value:"Explainability",text:"Explainability"},{value:"Fairness",text:"Fairness"},{value:"Functional Correctness",text:"Functional Correctness"},{value:"Interoperability",text:"Interoperability"},{value:"Interpretability",text:"Interpretability"},{value:"Maintainability",text:"Maintainability"},{value:"Monitorability",text:"Monitorability"},{value:"Privacy",text:"Privacy"},{value:"Resilience",text:"Resilience"},{value:"Resource Consumption",text:"Resource Consumption"},{value:"Robustness",text:"Robustness"},{value:"Safety",text:"Safety"},{value:"Scalability",text:"Scalability"},{value:"Security",text:"Security"},{value:"Testability",text:"Testability"},{value:"Trust",text:"Trust"}]),P=g([{value:"measurement",text:"Measurement"},{value:"validation",text:"Validation "}]);R.value.forEach(t=>{i.modelValue.tags.find(e=>e===t.name)&&(t.selected=!0)});async function z(){d.value=te(d.value);let t=!1;if(i.modelValue.header.catalog_id===""&&(d.value.catalog=!0,t=!0),i.modelValue.header.identifier===""&&(d.value.identifier=!0,t=!0),i.modelValue.code_type===""&&(d.value.code_type=!0,t=!0),t){ae();return}_("submit",i.modelValue)}function F(t,e){if(t)i.modelValue.tags.push(e),i.modelValue.tags.sort();else{const c=i.modelValue.tags.find(k=>k.name===e.name),w=i.modelValue.tags.indexOf(c);i.modelValue.tags.splice(w,1)}}function q(){navigator.clipboard.writeText(i.modelValue.code)}return(t,e)=>{const c=Y,w=x("UsaSelect"),k=x("UsaTextInput"),I=x("UsaCheckbox"),N=ce,h=x("UsaTextarea"),M=x("UsaButton");return y(),v("div",null,[s.newEntryFlag?S("",!0):(y(),v("div",me,[n("h1",pe,E(s.modelValue.header.identifier),1),ye,o(" "+E(s.modelValue.header.creator)+" - "+E(p(f)),1)])),s.newEntryFlag?(y(),v("div",fe,[l(w,{modelValue:s.modelValue.header.catalog_id,"onUpdate:modelValue":e[0]||(e[0]=r=>s.modelValue.header.catalog_id=r),options:p(C),error:p(d).catalog,onChange:e[1]||(e[1]=r=>p(d).catalog=!1)},{label:a(()=>[o(" Catalog "),l(c,null,{default:a(()=>[o(" Catalog where test example will be stored. ")]),_:1})]),"error-message":a(()=>[o("A catalog must be selected")]),_:1},8,["modelValue","options","error"]),l(k,{modelValue:i.modelValue.header.identifier,"onUpdate:modelValue":e[2]||(e[2]=r=>i.modelValue.header.identifier=r),error:p(d).identifier},{label:a(()=>[o(" Identifier "),l(c,null,{default:a(()=>[o(" User-defined identifier for the test example. ")]),_:1})]),"error-message":a(()=>[o("Identifier is required.")]),_:1},8,["modelValue","error"])])):S("",!0),n("div",he,[n("label",ve,[o(" Tags "),l(c,null,{default:a(()=>[o(" System-defined tags that are used in catalog search. Select as many as are relevant to the test example. ")]),_:1})]),(y(!0),v(O,null,D(p(R),(r,J)=>(y(),v("span",{key:J,class:"multiple-per-line-checkbox"},[l(I,{modelValue:r.selected,"onUpdate:modelValue":[H=>r.selected=H,H=>F(r.selected,r.name)]},{default:a(()=>[o(E(r.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),l(w,{modelValue:s.modelValue.property_category,"onUpdate:modelValue":e[3]||(e[3]=r=>s.modelValue.property_category=r),options:p(B)},{label:a(()=>[o(" Property Category "),l(c,null,{default:a(()=>[o(" High-level property that the test example is validating, e.g., functional correctness, performance, robustness. ")]),_:1})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue","options"]),l(k,{modelValue:s.modelValue.property,"onUpdate:modelValue":e[4]||(e[4]=r=>s.modelValue.property=r)},{label:a(()=>[o(" Property "),l(c,null,{default:a(()=>[o(" More specific property that the test example is validating, e.g., accuracy, inference time, robustness to image blur. ")]),_:1})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue"]),l(w,{modelValue:s.modelValue.code_type,"onUpdate:modelValue":e[5]||(e[5]=r=>s.modelValue.code_type=r),error:p(d).code_type,options:p(P),onChange:e[6]||(e[6]=r=>p(d).code_type=!1)},{label:a(()=>[o("Code Type")]),"error-message":a(()=>[o("Code Type must be selected")]),_:1},8,["modelValue","error","options"]),l(h,{modelValue:s.modelValue.code,"onUpdate:modelValue":e[8]||(e[8]=r=>s.modelValue.code=r),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:a(()=>[o(" Code "),l(c,null,{default:a(()=>[o(" Code for the test example. ")]),_:1}),l(N,{onClick:e[7]||(e[7]=r=>q())})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue"]),l(h,{modelValue:s.modelValue.description,"onUpdate:modelValue":e[9]||(e[9]=r=>s.modelValue.description=r),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:a(()=>[o(" Description "),l(c,null,{default:a(()=>[o(" Description of the test example. ")]),_:1})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue"]),l(k,{modelValue:s.modelValue.inputs,"onUpdate:modelValue":e[10]||(e[10]=r=>s.modelValue.inputs=r)},{label:a(()=>[o(" Inputs "),l(c,null,{default:a(()=>[o(" Inputs that are required to run the test example, e.g., data sets, parameters. ")]),_:1})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue"]),l(k,{modelValue:s.modelValue.output,"onUpdate:modelValue":e[11]||(e[11]=r=>s.modelValue.output=r)},{label:a(()=>[o(" Output "),l(c,null,{default:a(()=>[o(" Output of the test example, e.g., value, log entry, database entry, alert. ")]),_:1})]),"error-message":a(()=>[o("Not defined")]),_:1},8,["modelValue"]),n("div",ge,[l(M,{class:"primary-button",onClick:e[12]||(e[12]=r=>t.$emit("cancel"))},{default:a(()=>[o(" Cancel ")]),_:1}),l(M,{class:"primary-button",onClick:z},{default:a(()=>[o(" Save ")]),_:1})])])}}}),be="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z'/%3e%3c/svg%3e",Ve=n("title",null,"Test Catalog",-1),xe={key:0},Ee={class:"inline-input-left"},Ce=n("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Tag ",-1),we={class:"inline-input-right"},ke=n("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Property Category ",-1),Ue={class:"inline-button"},$e=n("img",{src:be,class:"usa-icon"},null,-1),Te={key:1},Fe=L({__name:"test-catalog",setup(s){const _=Z(),m=K("token"),V=g(!1),i=g(!1),u=g(""),b=g(""),f=g([]),d=g({});C();async function C(){await $fetch(_.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+m.value},body:{filter:{type:"all"}},onRequestError(){U()},onResponse({response:t}){t.ok&&(f.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}})}async function T(){u.value===""&&b.value===""?C():b.value===""?await $fetch(_.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+m.value},body:{filter:{type:"tag",name:"tags",value:u.value}},onRequestError(){U()},onResponse({response:t}){t.ok&&(f.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}}):u.value===""?await $fetch(_.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+m.value},body:{filter:{type:"property",name:"property_category",value:b.value}},onRequestError(){U()},onResponse({response:t}){t.ok&&(f.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}}):await $fetch(_.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+m.value},body:{filter:{type:"and",filters:[{type:"tag",name:"tags",value:u.value},{type:"property",name:"property_category",value:b.value}]}},onRequestError(){U()},onResponse({response:t}){t.ok&&(f.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}})}function R(){d.value={header:{identifier:"",creator:"",created:-1,updated:-1,catalog_id:""},tags:[],property_category:"",property:"",code_type:"",code:"",description:"",inputs:"",output:""}}function B(){R(),V.value=!0,i.value=!0}function P(t){d.value=t,V.value=!0,i.value=!1}async function z(t,e){confirm("Are you sure you want to delete the entry: "+e+" in the "+t+" catalog?")&&await $fetch(_.public.apiPath+"/catalog/"+t+"/entry/"+e,{retry:0,method:"DELETE",headers:{Authorization:"Bearer "+m.value},onRequestError(){U()},onResponse({response:c}){c.ok&&C()},onResponseError({response:c}){$(c.status,c._data.error_description)}})}function F(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(V.value=!1,R())}async function q(t){try{i.value?await $fetch(_.public.apiPath+"/catalog/"+t.header.catalog_id+"/entry",{retry:0,method:"POST",headers:{Authorization:"Bearer "+m.value},body:t,onRequestError(){U()},onResponse({response:e}){e.ok&&C()},onResponseError({response:e}){$(e.status,e._data.error_description)}}):await $fetch(_.public.apiPath+"/catalog/"+t.header.catalog_id+"/entry",{retry:0,method:"PUT",headers:{Authorization:"Bearer "+m.value},body:t,onRequestError(){U()},onResponse({response:e}){e.ok&&C()},onResponseError({response:e}){$(e.status,e._data.error_description)}})}catch{console.log("Error in submit.");return}alert("Entry has been saved successfully."),R(),V.value=!1}return(t,e)=>{const c=x("UsaButton"),w=x("UsaTextInput"),k=re,I=_e,N=X;return y(),G(N,{name:"base-layout"},{"page-title":a(()=>[o("Test Catalog")]),default:a(()=>[Ve,p(V)?S("",!0):(y(),v("div",xe,[l(c,{class:"secondary-button sub-header-float-button",onClick:B},{default:a(()=>[o(" Add Catalog Entry ")]),_:1}),n("div",Ee,[Ce,l(w,{modelValue:p(u),"onUpdate:modelValue":e[0]||(e[0]=h=>A(u)?u.value=h:null),onKeyup:e[1]||(e[1]=j(h=>T(),["enter"]))},null,8,["modelValue"])]),n("div",we,[ke,l(w,{modelValue:p(b),"onUpdate:modelValue":e[2]||(e[2]=h=>A(b)?b.value=h:null),onKeyup:e[3]||(e[3]=j(h=>T(),["enter"]))},null,8,["modelValue"])]),n("div",Ue,[l(c,{class:"usa-button--unstyled",onClick:e[4]||(e[4]=h=>T())},{default:a(()=>[$e]),_:1})]),l(k,{modelValue:p(f),"onUpdate:modelValue":e[5]||(e[5]=h=>A(f)?f.value=h:null),onEditEntry:P,onDeleteEntry:z},null,8,["modelValue"])])),p(V)?(y(),v("div",Te,[l(I,{modelValue:p(d),"onUpdate:modelValue":e[6]||(e[6]=h=>A(d)?d.value=h:null),"new-entry-flag":p(i),onCancel:F,onSubmit:q},null,8,["modelValue","new-entry-flag"])])):S("",!0)]),_:1})}}});export{Fe as default};

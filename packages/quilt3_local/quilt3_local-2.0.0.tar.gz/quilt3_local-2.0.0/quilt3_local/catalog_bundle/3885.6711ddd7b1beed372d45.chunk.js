"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[3885],{13885:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(70655),r=n(26470),l=n(66518),c=n.n(l),u=n(919),i=n(36962),o=n(82539),s=n(30601),m=n(67294),f=n(5977),p=n(41120),d=n(82285),k=n(282),b=n(10529),v=n(95477),h=n(78869),g=n(15805),E=n(12596),Z=n(43987),y=n(85693),C=n(766),x=n(84268),w=n(57156),S=n(69534),D=n(13950),N=n(82268),F=n(36473),q=n(15592),P=n(37600),W=n(25170),M=n(54208),$=n(87832),B=n(35992),R=n(29039),z=n(73206),H=n(42059);function I(e){var t=e.bucket,n=e.path,a=e.className,r=g.rx(t,n),l=m.useMemo((function(){return[{onClick:r.open,title:"Create file"}]}),[r.open]);return m.createElement(m.Fragment,null,r.render(),m.createElement(M.Z,{className:a,items:l}))}var L=p.Z((function(e){return{root:{alignItems:"baseline",display:"flex",marginLeft:e.spacing(2)},button:{fontSize:11,lineHeight:"22px",margin:e.spacing(0,1)}}}));function O(e){var t=e.bucket,n=e.items,l=e.onClearSelection,c=e.path,u=e.selection,i=L(),o=E.D$(),s=m.useMemo((function(){var e=[];return(null==u?void 0:u.includes(".."))&&e.push({bucket:t,key:F.P8((0,r.join)(c,".."))}),n.some((function(t){var n=t.name,r=t.handle,l=t.type;return!(null==u?void 0:u.length)||((null==u?void 0:u.includes(n))&&r&&e.push((0,a.pi)((0,a.pi)({},r),{key:"dir"===l?F.P8(r.key):r.key})),e.length===(null==u?void 0:u.length))})),e}),[t,c,n,u]),f=m.useCallback((function(){null==o||o.append("main",s),l()}),[o,s,l]);return m.createElement(d.Z,{direction:"down",in:!!(null==u?void 0:u.length)},m.createElement("div",{className:i.root},m.createElement(k.Z,{className:i.button,color:"primary",size:"small",variant:"outlined",onClick:f},"Add selected items to bookmarks")))}var _=u.Z(i.Z(h.$2.Sep(m.createElement(m.Fragment,null,"Â / "))),(function(e){var t=e.bucket,n=e.path,r=e.urls;return(0,a.ev)([{label:t,path:""}],F.tO(n),!0).map((function(e){var a=e.label,l=e.path;return h.$2.Segment({label:a,to:l===n?void 0:r.bucketDir(t,l)})}))}));function A(e){var t=e.response,n=e.locked,r=e.bucket,l=e.path,c=e.loadMore,u=f.k6(),i=S.D$().urls,p=m.useCallback((function(e){u.push(i.bucketDir(r,l,e))}),[u,i,r,l]),d=function(e){var t=S.D$().urls;return m.useMemo((function(){var n=e.dirs.map((function(n){return{type:"dir",name:F.ge(F.ro(e.path,n)),to:t.bucketDir(e.bucket,n),handle:{bucket:e.bucket,key:n}}})),r=e.files.map((function(n){var a=n.key,r=n.size,l=n.modified,c=n.archived;return{type:"file",name:F.ro(e.path,a),to:t.bucketFile(e.bucket,a),size:r,modified:l,archived:c,handle:{bucket:e.bucket,key:a}}})),l=(0,a.ev)((0,a.ev)((0,a.ev)([],""===e.path||e.prefix?[]:[{type:"dir",name:"..",to:t.bucketDir(e.bucket,F.up(e.path))}],!0),n,!0),r,!0);return o.Z(s.Z("name"),l)}),[e,t])}(t),k=m.useState([]),b=k[0],v=k[1],h=m.useCallback((function(e){return v(e)}),[]);return m.useEffect((function(){return v([])}),[r,l]),m.createElement(m.Fragment,null,m.createElement(W.NB,{items:d,locked:n,loadMore:c,truncated:t.truncated,prefixFilter:t.prefix,onSelectionChange:h,selection:b,toolbarContents:m.createElement(m.Fragment,null,m.createElement(W.I4,{key:"".concat(t.bucket,"/").concat(t.path),prefix:t.prefix,setPrefix:p}),m.createElement(O,{bucket:r,items:d,onClearSelection:function(){return v([])},path:l,selection:b}))}),m.createElement(R.Z,{files:t.files,mkUrl:null,path:l}))}var T,Y,j=p.Z((function(e){return{crumbs:(0,a.pi)((0,a.pi)({},e.typography.body1),{maxWidth:"100%",overflowWrap:"break-word"}),button:{flexShrink:0,marginBottom:"-3px",marginLeft:e.spacing(1),marginTop:"-3px"}}}));function U(e){var t,n,l,u,i=e.match.params,o=i.bucket,s=i.path,f=void 0===s?"":s,p=e.location,d=j(),k=S.D$().urls,g=C.D$(),E=g.desktop,W=g.noDownload,M=y.S3.use(),R=D.D$(),L=(0,N.Z)(p.search).prefix,O=F.Jx(f),U=O?(0,r.basename)(O):o,G=m.useMemo((function(){return[{label:"Python",hl:"python",contents:c()(T||(T=(0,a.cy)(['\n          import quilt3 as q3\n          b = q3.Bucket("s3://','")\n          # list files\n          b.ls("','")\n          # download\n          b.fetch("','", "./','")\n        '],['\n          import quilt3 as q3\n          b = q3.Bucket("s3://','")\n          # list files\n          b.ls("','")\n          # download\n          b.fetch("','", "./','")\n        '])),o,O,O,U)},{label:"CLI",hl:"bash",contents:c()(Y||(Y=(0,a.cy)(['\n          # list files\n          aws s3 ls "s3://',"/",'"\n          # download\n          aws s3 cp --recursive "s3://',"/",'" "./','"\n        '],['\n          # list files\n          aws s3 ls "s3://',"/",'"\n          # download\n          aws s3 cp --recursive "s3://',"/",'" "./','"\n        '])),o,O,o,O,U)}]}),[o,O,U]),J=m.useState(null),V=J[0],K=J[1];m.useLayoutEffect((function(){K(null)}),[O,L]);var Q=(0,x.et)(H.rx,{s3:M,bucket:o,path:O,prefix:L,prev:V}),X=m.useCallback((function(){Z.Z.case({Ok:function(e){e.continuationToken&&K(e)},_:function(){}},Q.result)}),[Q.result]),ee=$.eh({bucket:o,delayHashing:!0,disableStateDisplay:!0}),te=m.useCallback((function(e){ee.open({path:O,successor:e})}),[ee,O]);return m.createElement(b.Z,{pt:2,pb:4},m.createElement(w.Z,null,[O||"Files",o]),ee.render({successTitle:"Package created",successRenderMessage:function(e){var t=e.packageLink;return m.createElement(m.Fragment,null,"Package ",t," successfully created")},title:"Create package from directory"}),m.createElement(b.Z,{display:"flex",alignItems:"flex-start",mb:2},m.createElement("div",{className:d.crumbs,onCopy:h.Yn},(0,h.sY)(_({bucket:o,path:O,urls:k}))),m.createElement(b.Z,{flexGrow:1}),(null===(n=null===(t=null==R?void 0:R.ui)||void 0===t?void 0:t.actions)||void 0===n?void 0:n.createPackage)&&m.createElement(B.z,{bucket:o,className:d.button,onChange:te},"Create package from directory"),!W&&!E&&m.createElement(P.dN,{className:d.button,suffix:"dir/".concat(o,"/").concat(O),label:"Download directory"}),m.createElement(I,{className:d.button,bucket:o,path:O})),(null===(u=null===(l=null==R?void 0:R.ui)||void 0===l?void 0:l.blocks)||void 0===u?void 0:u.code)&&m.createElement(q.Z,{gutterBottom:!0},G),Q.case({Err:(0,z.Sj)(),Init:function(){return null},_:function(e){var t=Z.Z.getPrevResult(e);return t?m.createElement(A,{response:t,locked:!Z.Z.Ok.is(e),bucket:o,path:O,loadMore:X}):m.createElement(v.Z,null)}}))}},54208:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),r=n(17812),l=n(92863),c=n(38396),u=n(85639);function i(e){var t=e.className,n=e.items,i=a.useState(null),o=i[0],s=i[1],m=a.useCallback((function(e){return s(e.target)}),[s]),f=a.useCallback((function(){return s(null)}),[s]),p=a.useCallback((function(e){return function(){e(),s(null)}}),[]);return a.createElement(a.Fragment,null,a.createElement(r.Z,{className:t,onClick:m,size:"small"},a.createElement(l.Z,null,"more_vert")),a.createElement(c.Z,{anchorEl:o,open:!!o,onClose:f},n.map((function(e){var t=e.onClick,n=e.title;return a.createElement(u.Z,{key:n,onClick:p(t)},n)}))))}},87832:(e,t,n)=>{n.d(t,{WZ:()=>o.WZ,Ss:()=>a.Z,HI:()=>r.Z,wx:()=>l.Z,RZ:()=>o.RZ,fc:()=>u.f,BA:()=>s.BA,rr:()=>o.rr,Nt:()=>o.Nt,ux:()=>o.ux,RY:()=>m.Z,H4:()=>s.H4,Wr:()=>o.Wr,bF:()=>s.bF,cD:()=>o.cD,rV:()=>k,px:()=>c.p,OW:()=>o.OW,Wk:()=>o.Wk,eh:()=>i.e,qi:()=>o.qi});var a=n(55812),r=n(11988),l=n(52247),c=(n(78188),n(20913),n(94070)),u=n(5308),i=n(20358),o=n(23993),s=n(82786),m=n(85374),f=(n(41306),n(67294)),p=n(5977),d={revisePackage:!0};function k(){var e=p.k6(),t=p.TH(),n=f.useMemo((function(){return new URLSearchParams(t.search)}),[t.search]),a=n.getAll("action"),r=f.useRef(function(e){return e.every((function(e){return!!d[e]}))}(a)?a:[]);return f.useEffect((function(){n.has("action")&&function(e,t){e.delete("action"),t.replace({search:e.toString()})}(n,e)}),[e,n]),r.current}}}]);
//# sourceMappingURL=3885.6711ddd7b1beed372d45.chunk.js.map
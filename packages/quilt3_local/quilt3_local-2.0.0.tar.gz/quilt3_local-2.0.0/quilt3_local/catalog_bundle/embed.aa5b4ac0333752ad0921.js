"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[5991],{37764:(e,t,n)=>{n.d(t,{D$:()=>m,Gu:()=>v,zt:()=>l});var r=n(41106),o=n.n(r),a=n(89020),c=n(29969),i=n(67294),u=i.createContext({});u.displayName="Overrides";var l=u.Provider;function s(e,t){return null!=e?e:t}function m(e){var t=i.useContext(u);return i.useMemo((function(){return p(a.Z(s,t,e||{}))}),[e,t])}function f(e,t){if(null!=t&&"object"!=typeof t)throw new Error("".concat(e," must be an object if present"))}var h=function(e){return function(t){try{return"string"==typeof t?o()(t):t}catch(t){if(e&&t instanceof Error)throw new Error("".concat(e," must be a valid template string: ").concat(t.message));throw t}}};function d(e){if(e){if("notify"!==e&&"override"!==e)throw new Error('.overrides.s3ObjectLink.emit must be either "notify" or "override" or some falsy value');return e}}var p=c.Z({s3ObjectLink:{href:h(),emit:d}});function v(e){f(".overrides",e),f(".overrides.s3ObjectLink",null==e?void 0:e.s3ObjectLink),c.Z({s3ObjectLink:{href:h(".overrides.s3ObjectLink.href"),emit:d}})(e)}},60166:(e,t,n)=>{n.d(t,{X:()=>s,a:()=>m});var r=n(70655),o=n(67294),a=n(82268),c=function(e,t){return(Array.isArray(e)?e[0]:e)||t},i=(0,a.Z)(window.location.search),u=c(i.nonce,"".concat(Math.random)),l=c(i.origin,"*");function s(){return o.useCallback((function(e){window.parent.postMessage((0,r.pi)({source:"quilt-embed",nonce:u},e),l)}),[])}function m(e){var t=o.useCallback((function(t){var n;t.source!==window.parent||"*"!==l&&t.origin!==l||!(null===(n=t.data)||void 0===n?void 0:n.type)||e(t.data)}),[e]);o.useEffect((function(){return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[t])}},21497:(e,t,n)=>{n.d(t,{D:()=>c,z:()=>a});var r=n(67294),o=r.createContext({});function a(e){var t=e.config,n=e.children;return r.createElement(o.Provider,{value:t},n)}function c(){return r.useContext(o)}},24711:(e,t,n)=>{var r={};n.r(r),n.d(r,{bucketDir:()=>x,bucketFile:()=>Z,bucketRoot:()=>y,bucketSearch:()=>C});var o=n(67294),a=n(73935),c=n(70655),i=(n(12327),n(64457)),u=n(28216),l=n(5977),s=n(90071),m=n(10529),f=n(22318),h=n(43832),d=n(13457),p=n(39473),v=n(24452),b=n(74709),g=n(757),E=n(67456),k=n(69534),w=n(36473),y={path:"/b/:bucket",url:function(e){return"/b/".concat(e)}},Z={path:"/b/:bucket/tree/:path(.*[^/])",url:function(e,t,n){return"/b/".concat(e,"/tree/").concat((0,w.cv)(t)).concat((0,k.gL)({version:n}))}},x={path:"/b/:bucket/tree/:path(.+/)?",url:function(e,t,n){return void 0===t&&(t=""),"/b/".concat(e,"/tree/").concat((0,w.cv)(t)).concat((0,k.gL)({prefix:n||void 0}))}},C={path:"/b/:bucket/search",url:function(e,t){var n=t.q,r=t.p,o=t.retry;return"/b/".concat(e,"/search").concat((0,k.gL)({q:n,p:r,retry:o}))}},S=n(97456),z=n(46974),L=n(85693),j=n(88322),D=n(766),A=n(89978),P=n(57100),B=n(28238),O=n(92816),I=n(31274),N=n(17228),q=n(36155),F=n(68420),W=n(67869),$=n(33469),_=n(9001),G=n(34314),R=n(73206),T=n(40018),U=n(26470),X=n(73727),H=n(41120),M=n(14741),Y=n(7397),K=n(92863),J=n(57369),Q=n(28358),V=n(82285),ee=n(45258),te=n(282),ne=n(59114),re=n(82268),oe=n(21497),ae=H.Z((function(e){return{root:{background:(0,ne.U1)(e.palette.common.white,.1),borderRadius:e.shape.borderRadius,color:e.palette.common.white,overflow:"hidden",position:"absolute",right:0,transition:["background-color 200ms","width 200ms"],width:e.spacing(24),"&:hover":{background:(0,ne.U1)(e.palette.common.white,.2)}},focused:{background:"".concat((0,ne.U1)(e.palette.common.white,.2)," !important"),width:"100%"},input:{paddingLeft:e.spacing(4),paddingTop:8,paddingBottom:9,textOverflow:"ellipsis"},adornment:{cursor:"pointer",justifyContent:"center",pointerEvents:"none",position:"absolute",width:e.spacing(4)}}}));function ce(e){var t=e.bucket,n=(0,l.k6)(),r=k.D$(),a=r.paths,i=r.urls,u=(0,W.yj)(a.bucketSearch),s=u.location,m=u.match&&(0,re.Z)(s.search).q||"",f=o.useCallback((function(e){return i.bucketSearch(t,{q:e})}),[i,t]),h=o.useState(null),d=h[0],p=h[1],v=o.useState(!1),b=v[0],g=v[1],E=o.useCallback((function(e){p(e.target.value)}),[p]),w=o.useCallback((function(e){switch(e.key){case"Enter":m!==d&&n.push(f(d)),e.target.blur();break;case"Escape":e.target.blur()}}),[n,f,d,m]),y=o.useCallback((function(){p(m),g(!0)}),[m,p,g]),Z=o.useCallback((function(){p(null),g(!1)}),[p,g]),x=ae(),C=x.adornment,S=(0,c._T)(x,["adornment"]);return o.createElement(M.Z,{value:null===d?m:d,startAdornment:o.createElement(Y.Z,{className:C},o.createElement(K.Z,null,"search")),classes:S,placeholder:b?"Search s3://".concat(t):"Search",onChange:E,onFocus:y,onBlur:Z,onKeyDown:w})}var ie=H.Z((function(e){return{appBar:{zIndex:e.zIndex.appBar+1},btn:{color:e.palette.common.white,backgroundColor:(0,ne.U1)(e.palette.common.white,.1),"&:hover":{backgroundColor:(0,ne.U1)(e.palette.common.white,.2),"@media (hover: none)":{backgroundColor:(0,ne.U1)(e.palette.common.white,.1)}}}}}));function ue(e){var t=e.bucket,n=oe.D(),r=J.Z(),a=ie(),c=k.D$(),i=c.urls,u=c.paths,s=!!(0,l.$B)(u.bucketSearch),f=i.bucketDir(t,n.scope),d=!n.hideRootLink||s;return o.createElement(o.Fragment,null,o.createElement(Q.Z,null),o.createElement(V.Z,{appear:!1,direction:"down",in:!r},o.createElement(ee.Z,{className:a.appBar},o.createElement(Q.Z,{disableGutters:!0},o.createElement(h.Z,{maxWidth:"lg",style:{display:"flex"}},d&&o.createElement(te.Z,{to:f,component:X.Link,variant:"contained",className:a.btn},n.hideRootLink&&s?o.createElement(o.Fragment,null,o.createElement(K.Z,{style:{fontSize:16,marginLeft:-2}},"arrow_back_ios")," ","Back"):n.scope?(0,U.basename)(n.scope):"s3://".concat(t)),o.createElement(m.Z,{display:"flex",alignItems:"center",position:"relative",flexGrow:1,ml:d?2:void 0},o.createElement(ce,{bucket:t})))))))}var le=n(37764),se=n(60166),me=function(){return o.createElement(v.Z,{color:"text.secondary"})},fe=F.g((function(){return Promise.all([n.e(2996),n.e(7566),n.e(6898),n.e(3261),n.e(8129),n.e(4675),n.e(8657)]).then(n.bind(n,98657))}),me),he=F.g((function(){return Promise.all([n.e(2996),n.e(7566),n.e(6898),n.e(7142),n.e(3261),n.e(5995)]).then(n.bind(n,35995))}),me),de=F.g((function(){return Promise.all([n.e(2996),n.e(7566),n.e(6898),n.e(3261),n.e(3898),n.e(6545)]).then(n.bind(n,26545))}),me),pe=(0,A.Y)((function(){return function(e){return o.createElement("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:400,maxHeight:"90vh",fontFamily:"sans-serif",margin:0}},e.headline||"Something went wrong")}}));function ve(e){var t=e.children;return o.createElement(m.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:400,maxHeight:"90vh",textAlign:"center"},o.createElement(f.Z,{variant:"h3"},t))}var be=(0,A.Y)((function(){return function(e){return o.createElement(ve,null,e.headline||"Something went wrong")}})),ge=(0,g.qx)((function(){return o.createElement(ve,null,"Page not found")}));function Ee(){var e=(0,l.TH)(),t=k.D$().paths;return o.createElement(ge,{id:"".concat(e.pathname).concat(e.search).concat(e.hash)},o.createElement(l.rs,null,o.createElement(l.AW,{path:t.bucketRoot,component:ke}),o.createElement(l.AW,{component:g.IH})))}function ke(e){var t=e.match.params.bucket,n=k.D$().paths;return o.createElement(we,{bucket:t},o.createElement(l.rs,null,o.createElement(l.AW,{path:n.bucketFile,component:he,exact:!0,strict:!0}),o.createElement(l.AW,{path:n.bucketDir,component:fe,exact:!0}),o.createElement(l.AW,{path:n.bucketSearch,component:de,exact:!0}),o.createElement(l.AW,{component:g.IH})))}function we(e){var t=e.bucket,n=e.children,r=j.Xc(t);return o.createElement(o.Fragment,null,o.createElement(ue,{bucket:t}),o.createElement(h.Z,{maxWidth:"lg"},r.case({Ok:function(){return n},Err:(0,R.Sj)(),_:function(){return o.createElement(v.Z,{color:"text.secondary"})}})),o.createElement(m.Z,{flexGrow:1}))}function ye(){var e=o.useState(0),t=e[0],n=e[1],r=function(){var e=se.X(),t=o.useState(null),n=t[0],r=t[1];return se.a(o.useCallback((function(t){var n=t.type,o=(0,c._T)(t,["type"]);if("init"===n)try{if(!o.bucket&&!o.route)throw new Error("missing either .bucket or .route");if(o.scope){if("string"!=typeof o.scope)throw new Error(".scope must be a string");o.scope=w.P8(o.scope)}le.Gu(o.overrides),r(o)}catch(t){var a="Configuration error: ".concat(t.message);console.error(a),console.log("init object:",o),e({type:"error",message:a,init:o}),r(t)}}),[r,e])),o.useEffect((function(){e({type:"ready"})}),[e]),n}();return(0,G.Z)(r,(function(e){r!==e&&n((function(e){return e+1}))})),r?r instanceof Error?o.createElement(ve,null,"Configuration error"):o.createElement(be,{key:t},o.createElement(Le,(0,c.pi)({},{key:t,init:r}))):o.createElement(v.Z,{color:"text.secondary"})}function Ze(e){var t=e.init,n=e.children,r=function(e){var t=u.I0(),n=se.X(),r=o.useState(null),a=r[0],c=r[1];return o.useEffect((function(){var r=(0,N.Z)();t(b.Nw.signIn(e.credentials,r.resolver)),r.promise.then((function(){c(!0),n({type:"init",init:e})})).catch((function(t){console.warn("Authentication failure:"),console.error(t),c(new q.X("Authentication Failure")),n({type:"error",message:"Authentication failure: ".concat(t.message),credentials:e.credentials})}))}),[e,t,n]),a}(t);if(!r)return o.createElement(v.Z,{color:"text.secondary"});if(r instanceof Error)throw r;return n}function xe(e){var t=e.theme,n=e.children,r=(0,_.Z)(t,S.Bm);return o.createElement(d.Z,{theme:r},o.createElement(T.Z,null,n))}function Ce(e){var t=e.theme,n=e.children;return!t||i.Z(t)?n:o.createElement(xe,{theme:t},n)}var Se=function(e){e.parentNode.removeChild(e)};function ze(e){void 0===e&&(e=[]),o.useEffect((function(){var t=e.map((function(e){var t=window.document.createElement("link");return t.rel="stylesheet",t.href=e,function(e){var t=window.document.getElementsByTagName("link")[0];t.parentNode.insertBefore(e,t)}(t),t}));return function(){t.forEach(Se)}}),[e])}function Le(e){var t=e.init,n=k.D$().urls,r=(0,$.Z)((function(){return(0,s.PP)({initialEntries:[t.route||n.bucketDir(t.bucket,t.path)]})}));!function(e){var t=se.X();se.a(o.useCallback((function(n){var r=n.type,o=(0,c._T)(n,["type"]);if("navigate"===r)try{if(!o.route)throw new Error("missing .route");if("string"!=typeof o.route)throw new Error(".route must be a string");e.push(o.route)}catch(e){var a="Navigate: error: ".concat(e.message);console.error(a),console.log("params:",o),t({type:"error",message:a,data:o})}}),[e,t])),o.useEffect((function(){return e.listen((function(e,n){t({type:"navigate",route:"".concat(e.pathname).concat(e.search).concat(e.hash),action:n})}))}),[e,t])}(r);var a=(0,$.Z)((function(){return{load:function(){return{}},set:function(){},remove:function(){}}}));return ze(t.css),F.b([le.zt,{value:t.overrides}],[oe.z,{config:t}],[Ce,{theme:t.theme}],[I.z,{history:r}],[W.ZP,{history:r}],B.zt,[D.zt,{path:"/config.json"}],[o.Suspense,{fallback:o.createElement(v.Z,{color:"text.secondary"})}],P.$,E.zt,[z.zt,{fetch,middleware:[b.mi]}],[b.zt,{storage:a}],L.cN.Provider,L.De.z,L.S3.Provider,E.x0,j.zt,[Ze,{init:t}],Ee)}a.render(o.createElement((function(){return F.b(pe,[d.Z,{theme:S.yG}],T.Z,p.fC,be,O.zt,[k.zt,{routes:r}],[ye])}),null),document.getElementById("app"))}},e=>{e.O(0,[5617,1853,8595,8411],(()=>{return t=24711,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=embed.aa5b4ac0333752ad0921.js.map
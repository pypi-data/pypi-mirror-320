(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[3833],{53833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(74389),n=a(31529),i=a(93345),o=a(60162),s=a.n(o),d=a(77752),l=a(51865),g=a(30680),u=a(12832),h=a(8878),y=a(87898),f=a(70223),c=a(85400),m=a(60485),w=a(68258),p=a(9569),C=a(56782);const b=(0,n.debounce)((({visibleRange:e,chunkSizes:t,data:a,widgetName:r,onQueryRangesChanged:n})=>{if(!t)return;const i={};let o=!1;(0,w.W)(t).forEach((([n,s])=>{if(void 0===s)throw new Error(`Undefined chunkSize for the axis "${n}" in the lazy loading configuration of "${r}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const d=m.axisIds[n],l=a.axes.find((e=>e.id===d)),g=l?.range,u=e[n].from,h=e[n].to;if(!g||g.entireAxis)i[d]={from:0,to:s-1};else if(u>=g.from&&h<=g.to)i[d]={from:g.from,to:g.to};else{const e=u+Math.floor((h-u)/2),t=Math.max(0,Math.min(g.axisLength-s,e-Math.ceil(s/2))),a=Math.min(t+s,g.axisLength);i[d]={from:t,to:a},o=o||t!==g.from||a!==g.to}})),o&&n(i)}),300),S=e=>{const{data:t,widgetState:a,onQueryRangesChanged:n}=e,o=a.switchedTo??a.widgetKey,[s]=(0,f.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,p.useWidgetName)(a),g=(0,i.useCallback)((e=>b({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:n})),[d,t,l,n]);return(0,r.Y)(C.p,{...e,onVisibleRangeChanged:g})};var v=a(7496),x=a(93941);const W=e=>e,k=(0,i.memo)((e=>{(0,v.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:a,widgetState:n,onChange:o}=e,{widgetKey:s}=e.widgetState,[l]=(0,f.useWidgetPlugins)([s]),m=(0,p.useWidgetName)(n);(0,i.useMemo)((()=>{(0,u.K)(m,n.style?.measures)}),[n.style?.measures,m]);const[w]=(0,h.W0)([l?.cell]),[C]=(0,y.n6)([l?.cellStyle]),b=(0,i.useCallback)((C?.withCellStyle??W)(w?.Cell??c.Y),[w,C]);b.displayName="WithCellStyle";const k=(0,p.useFilters)({widgetState:n}),R=(0,i.useMemo)((()=>[...k.user,...k.dashboard,...k.page,...k.widget].some((({filter:e})=>(0,g.t)(e)))),[k]),z=(0,i.useMemo)((()=>!(0,d.isCellSetEmpty)(t.data)),[t.data]);if((0,p.isMappingEmpty)(n.mapping)&&!R)return(0,r.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,d.isErrorInQueryResultOfType)(t.error,"QueryTimeoutException"))throw new d.QueryTimeoutError(t.error);throw new d.QueryError(t.error)}return(0,r.Y)(p.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&z?(0,r.Y)(S,{Cell:b,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:o,onSelectionChange:a,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,r.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,...0===t.data?.cells.length?{reason:"noData",widgetState:n,onStateChange:o}:{reason:"noQuery"}})})}),((e,t)=>{if((0,p.isWidgetInDashboard)(t)!==(0,p.isWidgetInDashboard)(e))return!1;if((0,p.isWidgetInDashboard)(t)&&(0,p.isWidgetInDashboard)(e)){const{dashboardState:a,...r}=(0,n.omit)(e,"onDashboardChange"),{dashboardState:i,...o}=(0,n.omit)(t,"onDashboardChange"),d=(0,l.W)(a,e.pageKey),g=(0,l.W)(i,t.pageKey);return s()(r,o)&&a.filters===i.filters&&d?.filters===g?.filters&&a.queryContext===i.queryContext&&d?.queryContext===g?.queryContext}return s()(e,t)}))},60162:e=>{e.exports=function(e,t,a,r){var n=a?a.call(r,e,t):void 0;if(void 0!==n)return!!n;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var g=e[l],u=t[l];if(!1===(n=a?a.call(r,g,u,l):void 0)||void 0===n&&g!==u)return!1}return!0}}}]);
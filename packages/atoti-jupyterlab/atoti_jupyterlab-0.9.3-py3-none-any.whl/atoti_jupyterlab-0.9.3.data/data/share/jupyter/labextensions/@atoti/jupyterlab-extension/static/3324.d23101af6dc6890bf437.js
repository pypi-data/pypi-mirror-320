"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[3324],{62734:(e,t,a)=>{var r=a(73817),n=a(46955).axisHoverFormat,i=a(10017).rb,o=a(10017).ay,l=a(59812),s=a(39604),c=a(83084),d=a(93399).k,u=a(99134).extendFlat,f=s({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),p=u({},r.marker.line.width,{dflt:0}),x=u({width:p,editType:"calc"},l("marker.line")),h=u({line:x,editType:"calc"},l("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:d});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:u({},f,{description:"Sets the font used for `text`."}),insidetextfont:u({},f,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:u({},f,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:u({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:h,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},83084:e=>{e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},29151:(e,t,a)=>{var r=a(74364),n=a(24765),i=a(88209),o=a(3964),l=a(37514),s=a(25497),c=a(29342),d=a(62734),u=r.coerceFont;function f(e,t,a,n,i,o){var l=!(!1===(o=o||{}).moduleHasSelected),s=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),d=!(!1===o.moduleHasCliponaxis),f=!(!1===o.moduleHasTextangle),p=!(!1===o.moduleHasInsideanchor),x=!!o.hasPathbar,h=Array.isArray(i)||"auto"===i,m=h||"inside"===i,y=h||"outside"===i;if(m||y){var v=u(n,"textfont",a.font),b=r.extendFlat({},v),g=!(e.textfont&&e.textfont.color);if(g&&delete b.color,u(n,"insidetextfont",b),x){var T=r.extendFlat({},v);g&&delete T.color,u(n,"pathbar.textfont",T)}y&&u(n,"outsidetextfont",v),l&&n("selected.textfont.color"),s&&n("unselected.textfont.color"),c&&n("constraintext"),d&&n("cliponaxis"),f&&n("textangle"),n("texttemplate")}m&&p&&n("insidetextanchor")}e.exports={supplyDefaults:function(e,t,a,c){function u(a,n){return r.coerce(e,t,d,a,n)}if(o(e,t,c,u)){l(e,t,c,u),u("xhoverformat"),u("yhoverformat"),u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var p=u("textposition");f(e,0,c,u,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(e,t,u,a,c);var x=(t.marker.line||{}).color,h=i.getComponentMethod("errorbars","supplyDefaults");h(e,t,x||n.defaultLine,{axis:"y"}),h(e,t,x||n.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var a,n;function i(e){return r.coerce(n._input,n,d,e)}if("group"===t.barmode)for(var o=0;o<e.length;o++)"bar"===(n=e[o]).type&&(a=n._input,c(a,n,t,i))},handleText:f}},6176:(e,t,a)=>{var r=a(35646),n=a(1915),i=a(74364).isArrayOrTypedArray;t.coerceString=function(e,t,a){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==a?a:e.dflt},t.coerceNumber=function(e,t,a){if(r(t)){t=+t;var n=e.min,i=e.max;if(!(void 0!==n&&t<n||void 0!==i&&t>i))return t}return void 0!==a?a:e.dflt},t.coerceColor=function(e,t,a){return n(t).isValid()?t:void 0!==a?a:e.dflt},t.coerceEnumerated=function(e,t,a){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==a?a:e.dflt},t.getValue=function(e,t){var a;return Array.isArray(e)?t<e.length&&(a=e[t]):a=e,a},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},10170:(e,t,a)=>{var r=a(36279),n=a(35646),i=a(74364),o=a(2912),l=a(24765),s=a(92252),c=a(88209),d=a(62857).tickText,u=a(24687),f=u.recordMinTextSize,p=u.clearMinTextSize,x=a(85576),h=a(6176),m=a(83084),y=a(62734),v=y.text,b=y.textposition,g=a(58089).appendArrayPointValue,T=m.TEXTPAD;function k(e){return e.id}function w(e){if(e.ids)return k}function S(e,t){return e<t?1:-1}function z(e,t,a,r){var n;return!t.uniformtext.mode&&L(a)?(r&&(n=r()),e.transition().duration(a.duration).ease(a.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):e}function L(e){return e&&e.duration>0}function M(e){return"auto"===e?0:e}function _(e,t){var a=Math.PI/180*t,r=Math.abs(Math.sin(a)),n=Math.abs(Math.cos(a));return{x:e.width*n+e.height*r,y:e.width*r+e.height*n}}function A(e,t,a,r,n,i){var o=!!i.isHorizontal,l=!!i.constrained,s=i.angle||0,c=i.anchor||"end",d="end"===c,u="start"===c,f=((i.leftToRight||0)+1)/2,p=1-f,x=n.width,h=n.height,m=Math.abs(t-e),y=Math.abs(r-a),v=m>2*T&&y>2*T?T:0;m-=2*v,y-=2*v;var b=M(s);"auto"!==s||x<=m&&h<=y||!(x>m||h>y)||(x>y||h>m)&&x<h==m<y||(b+=90);var g=_(n,b),k=1;l&&(k=Math.min(1,m/g.x,y/g.y));var w=n.left*p+n.right*f,z=(n.top+n.bottom)/2,L=(e+T)*p+(t-T)*f,A=(a+r)/2,P=0,C=0;if(u||d){var H=(o?g.x:g.y)/2,O=o?S(e,t):S(a,r);o?u?(L=e+O*v,P=-O*H):(L=t-O*v,P=O*H):u?(A=a+O*v,C=-O*H):(A=r-O*v,C=O*H)}return{textX:w,textY:z,targetX:L,targetY:A,anchorX:P,anchorY:C,scale:k,rotate:b}}e.exports={plot:function(e,t,a,u,m,y){var k=t.xaxis,P=t.yaxis,C=e._fullLayout,H=e._context.staticPlot;m||(m={mode:C.barmode,norm:C.barmode,gap:C.bargap,groupgap:C.bargroupgap},p("bar",C));var O=i.makeTraceGroups(u,a,"trace bars").each((function(a){var c=r.select(this),u=a[0].trace,p="waterfall"===u.type,O="funnel"===u.type,F="bar"===u.type||O,I=0;p&&u.connector.visible&&"between"===u.connector.mode&&(I=u.connector.line.width/2);var j="h"===u.orientation,D=L(m),R=i.ensureSingle(c,"g","points"),V=w(u),B=R.selectAll("g.point").data(i.identity,V);B.enter().append("g").classed("point",!0),B.exit().remove(),B.each((function(c,p){var w,L,O=r.select(this),R=function(e,t,a,r){var n=[],i=[],o=r?t:a,l=r?a:t;return n[0]=o.c2p(e.s0,!0),i[0]=l.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),i[1]=l.c2p(e.p1,!0),r?[n,i]:[i,n]}(c,k,P,j),V=R[0][0],B=R[0][1],U=R[1][0],X=R[1][1],E=0==(j?B-V:X-U);if(E&&F&&h.getLineWidth(u,c)&&(E=!1),E||(E=!(n(V)&&n(B)&&n(U)&&n(X))),c.isBlank=E,E&&(j?B=V:X=U),I&&!E&&(j?(V-=S(V,B)*I,B+=S(V,B)*I):(U-=S(U,X)*I,X+=S(U,X)*I)),"waterfall"===u.type){if(!E){var Y=u[c.dir].marker;w=Y.line.width,L=Y.color}}else w=h.getLineWidth(u,c),L=c.mc||u.marker.color;function N(e){var t=r.round(w/2%1,2);return 0===m.gap&&0===m.groupgap?r.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var W=l.opacity(L)<1||w>.01?N:function(e,t,a){return a&&e===t?e:Math.abs(e-t)>=2?N(e):e>t?Math.ceil(e):Math.floor(e)};V=W(V,B,j),B=W(B,V,j),U=W(U,X,!j),X=W(X,U,!j)}var K=z(i.ensureSingle(O,"path"),C,m,y);if(K.style("vector-effect",H?"none":"non-scaling-stroke").attr("d",isNaN((B-V)*(X-U))||E&&e._context.staticPlot?"M0,0Z":"M"+V+","+U+"V"+X+"H"+B+"V"+U+"Z").call(s.setClipUrl,t.layerClipId,e),!C.uniformtext.mode&&D){var Z=s.makePointStyleFns(u);s.singlePointStyle(c,K,u,Z,e)}!function(e,t,a,r,n,l,c,u,p,m,y){var k,w=t.xaxis,L=t.yaxis,P=e._fullLayout;function C(t,a,r){return i.ensureSingle(t,"text").text(a).attr({class:"bartext bartext-"+k,"text-anchor":"middle","data-notex":1}).call(s.font,r).call(o.convertToTspans,e)}var H=r[0].trace,O="h"===H.orientation,F=function(e,t,a,r,n){var o,l=t[0].trace;return o=l.texttemplate?function(e,t,a,r,n){var o=t[0].trace,l=i.castOption(o,a,"texttemplate");if(!l)return"";var s,c,u,f,p="histogram"===o.type,x="waterfall"===o.type,h="funnel"===o.type,m="h"===o.orientation;function y(e){return d(f,f.c2l(e),!0).text}m?(s="y",c=n,u="x",f=r):(s="x",c=r,u="y",f=n);var v,b=t[a],T={};T.label=b.p,T.labelLabel=T[s+"Label"]=(v=b.p,d(c,c.c2l(v),!0).text);var k=i.castOption(o,b.i,"text");(0===k||k)&&(T.text=k),T.value=b.s,T.valueLabel=T[u+"Label"]=y(b.s);var w={};g(w,o,b.i),(p||void 0===w.x)&&(w.x=m?T.value:T.label),(p||void 0===w.y)&&(w.y=m?T.label:T.value),(p||void 0===w.xLabel)&&(w.xLabel=m?T.valueLabel:T.labelLabel),(p||void 0===w.yLabel)&&(w.yLabel=m?T.labelLabel:T.valueLabel),x&&(T.delta=+b.rawS||b.s,T.deltaLabel=y(T.delta),T.final=b.v,T.finalLabel=y(T.final),T.initial=T.final-T.delta,T.initialLabel=y(T.initial)),h&&(T.value=b.s,T.valueLabel=y(T.value),T.percentInitial=b.begR,T.percentInitialLabel=i.formatPercent(b.begR),T.percentPrevious=b.difR,T.percentPreviousLabel=i.formatPercent(b.difR),T.percentTotal=b.sumR,T.percenTotalLabel=i.formatPercent(b.sumR));var S=i.castOption(o,b.i,"customdata");return S&&(T.customdata=S),i.texttemplateString(l,T,e._d3locale,w,T,o._meta||{})}(e,t,a,r,n):l.textinfo?function(e,t,a,r){var n=e[0].trace,o="h"===n.orientation,l="waterfall"===n.type,s="funnel"===n.type;function c(e){return d(o?a:r,+e,!0).text}var u,f,p=n.textinfo,x=e[t],h=p.split("+"),m=[],y=function(e){return-1!==h.indexOf(e)};if(y("label")&&m.push((f=e[t].p,d(o?r:a,f,!0).text)),y("text")&&(0===(u=i.castOption(n,x.i,"text"))||u)&&m.push(u),l){var v=+x.rawS||x.s,b=x.v,g=b-v;y("initial")&&m.push(c(g)),y("delta")&&m.push(c(v)),y("final")&&m.push(c(b))}if(s){y("value")&&m.push(c(x.s));var T=0;y("percent initial")&&T++,y("percent previous")&&T++,y("percent total")&&T++;var k=T>1;y("percent initial")&&(u=i.formatPercent(x.begR),k&&(u+=" of initial"),m.push(u)),y("percent previous")&&(u=i.formatPercent(x.difR),k&&(u+=" of previous"),m.push(u)),y("percent total")&&(u=i.formatPercent(x.sumR),k&&(u+=" of total"),m.push(u))}return m.join("<br>")}(t,a,r,n):h.getValue(l.text,a),h.coerceString(v,o)}(P,r,n,w,L);k=function(e,t){var a=h.getValue(e.textposition,t);return h.coerceEnumerated(b,a)}(H,n);var I="stack"===m.mode||"relative"===m.mode,j=r[n],D=!I||j._outmost;if(F&&"none"!==k&&(!j.isBlank&&l!==c&&u!==p||"auto"!==k&&"inside"!==k)){var R=P.font,V=x.getBarColor(r[n],H),B=x.getInsideTextFont(H,n,R,V),U=x.getOutsideTextFont(H,n,R),X=a.datum();O?"log"===w.type&&X.s0<=0&&(l=w.range[0]<w.range[1]?0:w._length):"log"===L.type&&X.s0<=0&&(u=L.range[0]<L.range[1]?L._length:0);var E,Y,N,W,K,Z=Math.abs(c-l)-2*T,G=Math.abs(p-u)-2*T;if("outside"===k&&(D||j.hasB||(k="inside")),"auto"===k&&(D?(k="inside",E=C(a,F,K=i.ensureUniformFontSize(e,B)),N=(Y=s.bBox(E.node())).width,W=Y.height,N>0&&W>0&&(N<=Z&&W<=G||N<=G&&W<=Z||(O?Z>=N*(G/W):G>=W*(Z/N)))?k="inside":(k="outside",E.remove(),E=null)):k="inside"),!E){var q=(E=C(a,F,K=i.ensureUniformFontSize(e,"outside"===k?U:B))).attr("transform");if(E.attr("transform",""),N=(Y=s.bBox(E.node())).width,W=Y.height,E.attr("transform",q),N<=0||W<=0)return void E.remove()}var J,Q=H.textangle;J="outside"===k?function(e,t,a,r,n,i){var o,l=!!i.isHorizontal,s=!!i.constrained,c=i.angle||0,d=n.width,u=n.height,f=Math.abs(t-e),p=Math.abs(r-a);o=l?p>2*T?T:0:f>2*T?T:0;var x=1;s&&(x=l?Math.min(1,p/u):Math.min(1,f/d));var h=M(c),m=_(n,h),y=(l?m.x:m.y)/2,v=(n.left+n.right)/2,b=(n.top+n.bottom)/2,g=(e+t)/2,k=(a+r)/2,w=0,z=0,L=l?S(t,e):S(a,r);return l?(g=t-L*o,w=L*y):(k=r+L*o,z=-L*y),{textX:v,textY:b,targetX:g,targetY:k,anchorX:w,anchorY:z,scale:x,rotate:h}}(l,c,u,p,Y,{isHorizontal:O,constrained:"both"===H.constraintext||"outside"===H.constraintext,angle:Q}):A(l,c,u,p,Y,{isHorizontal:O,constrained:"both"===H.constraintext||"inside"===H.constraintext,angle:Q,anchor:H.insidetextanchor}),J.fontSize=K.size,f("histogram"===H.type?"bar":H.type,J,P),j.transform=J;var $=z(E,P,m,y);i.setTransormAndDisplay($,J)}else a.select("text").remove()}(e,t,O,a,p,V,B,U,X,m,y),t.layerClipId&&s.hideOutsideRangePoint(c,O.select("text"),k,P,u.xcalendar,u.ycalendar)}));var U=!1===u.cliponaxis;s.setClipUrl(c,U?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,O,t,m)},toMoveInsideBar:A}},85576:(e,t,a)=>{var r=a(36279),n=a(24765),i=a(92252),o=a(74364),l=a(88209),s=a(24687).resizeText,c=a(62734),d=c.textfont,u=c.insidetextfont,f=c.outsidetextfont,p=a(6176);function x(e,t,a){i.pointStyle(e.selectAll("path"),t,a),h(e,t,a)}function h(e,t,a){e.selectAll("text").each((function(e){var n=r.select(this),l=o.ensureUniformFontSize(a,m(n,e,t,a));i.font(n,l)}))}function m(e,t,a,r){var n=r._fullLayout.font,i=a.textfont;if(e.classed("bartext-inside")){var o=T(t,a);i=v(a,t.i,n,o)}else e.classed("bartext-outside")&&(i=b(a,t.i,n));return i}function y(e,t,a){return g(d,e.textfont,t,a)}function v(e,t,a,r){var i=y(e,t,a);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(i={color:n.contrast(r),family:i.family,size:i.size}),g(u,e.insidetextfont,t,i)}function b(e,t,a){var r=y(e,t,a);return g(f,e.outsidetextfont,t,r)}function g(e,t,a,r){t=t||{};var n=p.getValue(t.family,a),i=p.getValue(t.size,a),o=p.getValue(t.color,a);return{family:p.coerceString(e.family,n,r.family),size:p.coerceNumber(e.size,i,r.size),color:p.coerceColor(e.color,o,r.color)}}function T(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll("g.barlayer").selectAll("g.trace");s(e,t,"bar");var a=t.size(),n=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===n.barmode&&a>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){x(r.select(this),t[0].trace,e)})),l.getComponentMethod("errorbars","style")(t)},styleTextPoints:h,styleOnSelect:function(e,t,a){var n=t[0].trace;n.selectedpoints?function(e,t,a){i.selectedPointStyle(e.selectAll("path"),t),function(e,t,a){e.each((function(e){var n,l=r.select(this);if(e.selected){n=o.ensureUniformFontSize(a,m(l,e,t,a));var s=t.selected.textfont&&t.selected.textfont.color;s&&(n.color=s),i.font(l,n)}else i.selectedTextStyle(l,t)}))}(e.selectAll("text"),t,a)}(a,n,e):(x(a,n,e),l.getComponentMethod("errorbars","style")(a))},getInsideTextFont:v,getOutsideTextFont:b,getBarColor:T,resizeText:s}},25497:(e,t,a)=>{var r=a(24765),n=a(67252).hasColorscale,i=a(43155),o=a(74364).coercePattern;e.exports=function(e,t,a,l,s){var c=a("marker.color",l),d=n(e,"marker");d&&i(e,t,s,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",r.defaultLine),n(e,"marker.line")&&i(e,t,s,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),o(a,"marker.pattern",c,d),a("selected.marker.color"),a("unselected.marker.color")}},24687:(e,t,a)=>{var r=a(36279),n=a(74364);function i(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,a){if(a.uniformtext.mode){var r=i(e),n=a.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<n,a[r]=a[r]||1/0,t.hide||(a[r]=Math.min(a[r],Math.max(o,n)))}},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,a){var i=e._fullLayout,o=i["_"+a+"Text_minsize"];if(o){var l,s="hide"===i.uniformtext.mode;switch(a){case"funnelarea":case"pie":case"sunburst":l="g.slice";break;case"treemap":case"icicle":l="g.slice, g.pathbar";break;default:l="g.points > g.point"}t.selectAll(l).each((function(e){var t=e.transform;if(t){t.scale=s&&t.hide?0:o/t.fontSize;var a=r.select(this).select("text");n.setTransormAndDisplay(a,t)}}))}}}}}]);
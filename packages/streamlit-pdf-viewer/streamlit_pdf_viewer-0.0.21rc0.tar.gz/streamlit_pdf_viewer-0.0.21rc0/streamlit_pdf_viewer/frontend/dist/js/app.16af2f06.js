(()=>{"use strict";var e={914:(e,t,n)=>{var a=n(3751),r=n(641);const i={id:"app"};function o(e,t,n,a,o,s){const l=(0,r.g2)("PdfViewer"),d=(0,r.g2)("WithStreamlitConnection");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(d,null,{default:(0,r.k6)((({args:e})=>[(0,r.bF)(l,{args:e},null,8,["args"])])),_:1})])}var s=n(33);const l={key:0},d={key:0,id:"pdfAnnotations"},c=["onClick"],p=["id"],g={key:1},u=["src","width","height"],h={key:2},v=["src","width","height"],f={key:3};function w(e,t,n,a,i,o){return(0,r.uX)(),(0,r.CE)("div",{id:"pdfContainer",style:(0,s.Tr)(a.pdfContainerStyle)},["unwrap"===n.args.rendering?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",{id:"pdfViewer",style:(0,s.Tr)(a.pdfViewerStyle)},[n.args.annotations?((0,r.uX)(),(0,r.CE)("div",d,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.filteredAnnotations,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,style:(0,s.Tr)(a.getPageStyle),onClick:n=>a.handleAnnotationClick(e,t)},[(0,r.Lk)("div",{style:(0,s.Tr)(a.getAnnotationStyle(e,t)),id:`annotation-${t}`},null,12,p)],12,c)))),128))])):(0,r.Q3)("",!0)],4)])):"legacy_embed"===n.args.rendering?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,u)])):"legacy_iframe"===n.args.rendering?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,v)])):((0,r.uX)(),(0,r.CE)("div",f," Error rendering option. "))],4)}n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(8992),n(4520);var m=n(953),y=(n(951),n(9936)),_=n(7445);const E="pdfjs-dist/cmaps/",b=!0,C=!0,k={props:["args"],setup(e){const t=(0,m.KR)(0),n=(0,m.KR)(0),a=(0,m.KR)([]),i=(0,m.KR)([]),o=(0,m.KR)([]),s=(0,m.KR)([]),l=0===e.args.pages_to_render.length,d=(0,r.EW)((()=>l?e.args.annotations:e.args.annotations.filter((t=>e.args.pages_to_render.includes(Number(t.page)))))),c=(e,t)=>{const n=JSON.parse(JSON.stringify(e));_.wk.setComponentValue({clicked_annotation:{index:t,...n}})},p=!0===e.args.render_text,g=(0,r.EW)((()=>{const t=(e,t)=>"string"===typeof e&&e.endsWith("%")?e:"number"===typeof e||"string"===typeof e&&/^\d+$/.test(e)?`${e}px`:t;return{width:t(e.args.width,`${n.value}px`),height:e.args.height?`${e.args.height}px`:"auto",overflow:"auto"}})),u={position:"relative"},h={position:"relative"},v=t=>{let n=0;if(l)for(let r=0;r<t-1;r++)n+=i.value[r]*a.value[r]+e.args.pages_vertical_spacing;else for(let r=0;r<i.value.length;r++)e.args.pages_to_render.includes(r+1)&&r<t-1&&(n+=i.value[r]*a.value[r]+e.args.pages_vertical_spacing);return n},f=(t,n)=>{const r=a.value[t.page-1],i={position:"absolute",left:t.x*r+"px",top:`${v(t.page)+t.y*r}px`,width:t.width*r+"px",height:t.height*r+"px",outline:e.args.annotation_outline_size*r+"px solid",outlineColor:t.color,cursor:"pointer","z-index":1};return n&&s.value.push(`annotation-${n}`),i},w=e=>{const t=e?.getElementsByTagName("canvas");for(let n=t.length-1;n>=0;n--)e?.removeChild(t.item(n))},k=(t,n,a,r,i=1)=>{const o=t.getViewport({scale:n,rotation:a}),s=(window.devicePixelRatio||1)*i,l=document.createElement("canvas");return l.id=`canvas_page_${r}`,l.height=o.height*s+e.args.pages_vertical_spacing,l.width=o.width*s,l.style.width=o.width+"px",l.style.height=o.height+"px",l.style.display="block",l.style.marginBottom=`${e.args.pages_vertical_spacing}px`,l.getContext("2d").scale(s,s),l},x=async(e,t,n)=>{const a={canvasContext:t.getContext("2d"),viewport:n};try{const t=e.render(a);await t.promise.catch((function(e){}))}catch(r){}if(p){const a=await e.getTextContent(),r=document.createElement("div");r.className="textLayer",r.style="z-index: 2";const i=new y.D6({textContentSource:a,container:r,viewport:n,textDivs:[]});await i.render(),requestAnimationFrame((async()=>{const e=document.createElement("div");e.className="page";const n=document.createElement("div");n.className="canvasWrapper",n.appendChild(t),e.style="position: relative;";const a=document.getElementById("pdfViewer");e.appendChild(n),e.appendChild(r),a.appendChild(e)}))}else requestAnimationFrame((()=>{const e=document.createElement("div");e.className="page";const n=document.createElement("div");n.className="canvasWrapper",n.appendChild(t),e.style="position: relative;",e.appendChild(n),pdfViewer.appendChild(e)}))},$=async(r,s,l=null)=>{if(0===l.length){l=[];for(let e=0;e<r.numPages;e++)l.push(e+1)}let d=1;e.args.resolution_boost&&(d=e.args.resolution_boost);for(let c=1;c<=r.numPages;c++){const p=await r.getPage(c),g=p.rotate,u=p.getViewport({scale:1,rotation:g});if(e.args.height>0){const t=u.width/u.height,a=t*e.args.height;(0===n.value||a<n.value)&&(n.value=a)}const h=n.value/u.width;if(a.value.push(h),i.value.push(u.height),l.includes(c)){const e=k(p,h,g,c,d);s.style.setProperty("--scale-factor",h);const n=p.getViewport({scale:a.value[p._pageIndex],rotation:p.rotate,intent:"print"}),r=(window.devicePixelRatio||1)*d;t.value+=e.height/r,await x(p,e,n),void 0!==e.id&&o.value.push(e.id)}}l.length>0&&(t.value-=e.args.pages_vertical_spacing)},S=e=>{window.alert(e.message),console.error(e)},V=async t=>{y.EA.workerSrc="pdfjs-dist/build/pdf.worker.mjs";try{const n=await(0,y.YE)({url:t,cMapUrl:E,cMapPacked:b,enableXfa:C}),a=document.getElementById("pdfViewer");w(a);const r=await n.promise;await $(r,a,e.args.pages_to_render)}catch(n){S(n)}},N=()=>{if(e.args.scroll_to_page){const t=document.getElementById(`canvas_page_${e.args.scroll_to_page}`);t&&t.scrollIntoView({behavior:"smooth"})}else if(e.args.scroll_to_annotation){const t=document.getElementById("annotation-"+(e.args.scroll_to_annotation-1));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},R=()=>{const e=new Set,t=new Set;let n;for(n=0;n<s.value.length;n++)t.add(s.value[n]);for(n=0;n<o.value.length;n++)e.add(o.value[n])},A=()=>{_.wk.setFrameHeight(e.args.height||t.value)},O=()=>{const{width:t}=e.args,a=e=>{if("string"===typeof e&&e.endsWith("%")){const t=parseFloat(e)/100;return Math.floor(window.innerWidth*t)}return Number.isInteger(Number(e))?Number(e):window.innerWidth};if(null===t||void 0===t)n.value=window.innerWidth;else{const e=a(t);n.value=Math.min(e,window.innerWidth)}};return(0,r.sV)((()=>{const t=`data:application/pdf;base64,${e.args.binary}`;O(),"unwrap"===e.args.rendering?V(t).then(A).then(R):A()})),(0,r.$u)((()=>{A(),O(),"unwrap"===e.args.rendering&&N()})),{filteredAnnotations:d,handleAnnotationClick:c,getAnnotationStyle:f,pdfContainerStyle:g,pdfViewerStyle:u,getPageStyle:h}}};var x=n(6262);const $=(0,x.A)(k,[["render",w]]),S=$,V={key:0},N={class:"err__msg"};function R(e,t,n,a,i,o){return(0,r.uX)(),(0,r.CE)("div",null,[""!=e.componentError?((0,r.uX)(),(0,r.CE)("div",V,[t[0]||(t[0]=(0,r.Lk)("h1",{class:"err__title"},"Component Error",-1)),(0,r.Lk)("div",N,"Message: "+(0,s.v_)(e.componentError),1)])):null!=e.renderData?(0,r.RG)(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled},void 0,!0):(0,r.Q3)("",!0)])}const A=(0,r.pM)({name:"WithStreamlitConnection",setup(){const e=(0,m.KR)(void 0),t=(0,m.KR)(""),n=n=>{const a=n;e.value=a.detail,t.value=""};return(0,r.sV)((()=>{_.wk.events.addEventListener(_.wk.RENDER_EVENT,n),_.wk.setComponentReady()})),(0,r.$u)((()=>{""!=t.value&&_.wk.setFrameHeight()})),(0,r.hi)((()=>{_.wk.events.removeEventListener(_.wk.RENDER_EVENT,n)})),(0,r.qG)((e=>{t.value=String(e)})),{renderData:e,componentError:t}}}),O=(0,x.A)(A,[["render",R],["__scopeId","data-v-bef81972"]]),P=O,W=(0,r.pM)({name:"App",components:{PdfViewer:S,WithStreamlitConnection:P}}),X=(0,x.A)(W,[["render",o]]),I=X;(0,a.Ef)(I).mount("#app")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e=[];n.O=(t,a,r,i)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,r,i]=e[c],s=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](a[l])))?a.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}})(),(()=>{n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[o,s,l]=a,d=0;if(o.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var c=l(n)}for(t&&t(a);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunkstreamlit_pdf_viewer"]=self["webpackChunkstreamlit_pdf_viewer"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[504],(()=>n(914)));a=n.O(a)})();
//# sourceMappingURL=app.16af2f06.js.map
import{u as C,r as c,j as e,b as u,k as b,l as w,m as F,n as M,L as f,z as T,p as E,T as k,C as A,s as P,x as h,ay as O,ad as S,az as q,M as v,A as B,aa as x,E as D,H as _,I as H,t as y,U as L,v as U,g as m,F as j,G as I}from"./index-Be3uPtkT.js";import{CreateCredentialProfileForm as R}from"./create-CqKbYF33.js";function z({className:a,callback:s,formConfig:n}){const{isOpen:t,open:r,close:o}=h(),d=c.useCallback(l=>{o(),s&&s(l)},[s,o]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{message:"Create New",className:a,children:e.jsx(S,{className:"btn-ghost btn-circle",children:e.jsx(q,{className:"w-7 h-7",onClick:r})})}),e.jsxs(v,{isOpen:t,close:o,isDismissibleOnOutsideClick:!1,className:"max-w-2xl min-h-96",children:[e.jsx(B,{children:"Create Credential Profile"}),e.jsx(R,{callback:d,formConfig:n})]})]})}const V=c.forwardRef(function(s,n){const{createNewProfileCallback:t,title:r="Credentials Profile",formConfig:o,...d}=s,l=C({queryKey:["credential_profiles"],queryFn:()=>m.get("/api/credential_profiles").then(i=>i.data),meta:{showError:!0,errorMessage:"Failed to load credential profiles"}}),g=c.useMemo(()=>{var i;return((i=l.data)==null?void 0:i.reduce((N,p)=>({...N,[p.id]:p.name}),{}))??{}},[l.data]);return l.isSuccess?e.jsxs(u,{className:"flex",children:[e.jsx(x,{...d,ref:n,values:g,containerClassName:"grow",title:r}),e.jsx(z,{className:"mt-9 ms-1",callback:i=>t&&t(i.id),formConfig:o})]}):e.jsx(x,{...d,ref:n,values:{},containerClassName:"grow",title:r})});function G({id:a}){const s=h(),n=D({mutationFn:()=>m.delete(y("/api/credential_profiles",a)),onSuccess:()=>j.success("The credential profile was deleted"),onError:t=>j.error(I(t).message)});return e.jsxs(e.Fragment,{children:[e.jsx(_,{onClick:()=>s.setOpen(!0)}),e.jsx(H,{isOpen:s.isOpen,close:s.close,message:"Are you sure you want to delete this entry?",action:()=>n.mutate()})]})}function K({cell:a}){const s=String(a.getValue());return e.jsxs(u,{className:"flex gap-2",children:[e.jsx(f,{to:y(s,"update"),children:e.jsx(L,{})}),e.jsx(G,{id:s})]})}function W(){const a=C({queryKey:["credential_profiles"],queryFn:()=>m.get("/api/credential_profiles").then(r=>r.data)}),s=c.useMemo(()=>{const r=U();return[r.accessor("name",{header:"Name"}),r.accessor("description",{header:"Description"}),r.accessor("entity_type",{header:"Type"}),r.accessor("username",{header:"Username"}),r.accessor("domain",{header:"Domain"}),r.accessor("id",{header:"Actions",enableGlobalFilter:!1,cell:({cell:o})=>e.jsx(K,{cell:o})})]},[]),t={data:c.useMemo(()=>a.data??[],[a.data]),columns:s,enablePagination:!0};return e.jsx(u,{className:"m-4",children:e.jsxs(b,{className:"grow",children:[e.jsxs(w,{divider:!0,children:[e.jsx(F,{description:"Using credential profiles lets you apply credential settings consistently across devices",children:"Credential Profiles"}),e.jsx(M,{children:e.jsx(f,{to:"create",children:e.jsx(T,{className:"btn-primary",children:"Add New"})})})]}),e.jsxs(E,{children:[a.isSuccess&&e.jsx(k,{...t}),a.isPending&&e.jsx(A,{}),a.isError&&e.jsx(P,{error:a.error})]})]})})}export{z as CredentialsCreateModal,G as CredentialsDelete,V as CredentialsFormSelect,W as default};

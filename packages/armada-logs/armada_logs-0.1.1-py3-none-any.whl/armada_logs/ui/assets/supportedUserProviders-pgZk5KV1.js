import{a8 as K,Y as v,E as L,g as b,a9 as y,a3 as U,j as e,B as q,a as w,$ as C,a0 as d,aa as S,ab as F,a1 as N,ac as O,L as A,ad as B,a2 as R,u as I,t as V,s as $,C as J,a4 as Q,ae as D,O as Y}from"./index-Be3uPtkT.js";import{l as z,F as G}from"./logo_microsoft-CP2bHIYw.js";const _={required:{value:!0,message:Q.fieldRequired}};function H({callback:r,roles:i,providerId:u}){var c,p,x,g,j;const s=Object.entries(i).find(a=>a[1]===K.USER),{register:t,handleSubmit:n,formState:{errors:o},setError:l}=v({defaultValues:{is_enabled:!0,provider_id:u,role_id:s?s[0]:void 0}}),f=L({mutationFn:a=>b.post(E.getUserProviderByType(y.LDAP).create.route,a),onSuccess:()=>r(),onError:a=>l(...U(a))});return e.jsxs(q,{children:[e.jsx(w,{children:"Create LDAP user"}),e.jsxs(C,{className:"lg:max-w-3xl",onSubmit:n(a=>f.mutate(a)),children:[e.jsx(d,{...t("name",_),title:"Name",error:(c=o.name)==null?void 0:c.message,required:!0}),e.jsx(d,{...t("email",_),error:(p=o.email)==null?void 0:p.message,title:"Email",description:"Value assigned to the authentication attribute",required:!0}),e.jsx(d,{...t("provider_id"),type:"hidden"}),e.jsx(S,{...t("role_id",_),isEmptyOptionVisible:!1,values:i,error:(x=o.role_id)==null?void 0:x.message,title:"Role",required:!0}),e.jsx(F,{...t("is_enabled"),error:(g=o.is_enabled)==null?void 0:g.message,title:"Enabled",titlePosition:"after"}),e.jsx(N,{children:(j=o.root)==null?void 0:j.message}),e.jsxs(O,{children:[e.jsx(A,{to:"..",children:e.jsx(B,{type:"button",className:"me-4 btn-neutral",children:"Discard"})}),e.jsx(R,{className:"btn-primary",isPending:f.isPending,children:"Create"})]})]})]})}function W({id:r,values:i,callback:u,className:s,roles:t}){var p,x,g,j;const{register:n,handleSubmit:o,formState:{errors:l},setError:f}=v({defaultValues:i}),c=L({mutationFn:a=>b.put(V(E.getUserProviderByType(y.LDAP).update.route,r),a),onSuccess:()=>u(),onError:a=>f(...U(a))});return e.jsxs(C,{className:s,onSubmit:o(a=>c.mutate(a)),children:[e.jsx(d,{...n("name",_),title:"Name",error:(p=l.name)==null?void 0:p.message,required:!0}),e.jsx(d,{...n("email",{disabled:!0}),title:"Email",description:"Value assigned to the authentication attribute",required:!0}),e.jsx(S,{...n("role_id",_),isEmptyOptionVisible:!1,values:t,error:(x=l.role_id)==null?void 0:x.message,title:"Role"}),e.jsx(F,{...n("is_enabled"),error:(g=l.is_enabled)==null?void 0:g.message,title:"Enabled",titlePosition:"after"}),e.jsx(N,{children:(j=l.root)==null?void 0:j.message}),e.jsxs(O,{children:[e.jsx(A,{to:"..",children:e.jsx(B,{type:"button",className:"me-4",children:"Cancel"})}),e.jsx(R,{isPending:c.isPending,className:"btn-primary",children:"Save Changes"})]})]})}function X({id:r,callback:i,roles:u}){const s=I({queryKey:["users",r],queryFn:()=>b.get(V(E.getUserProviderByType(y.LDAP).get.route,r)).then(t=>t.data)});return s.isError?e.jsx($,{error:s.error}):s.isPending?e.jsx(J,{}):s.data?e.jsxs(q,{children:[e.jsx(w,{children:"Update LDAP user"}),e.jsx(W,{id:r,values:s.data,className:"lg:max-w-3xl",callback:i,roles:u})]}):null}const h={required:{value:!0,message:Q.fieldRequired}};function Z({callback:r,roles:i,providerId:u}){var c,p,x,g,j,a,P;const s=Object.entries(i).find(m=>m[1]===K.USER),{register:t,handleSubmit:n,formState:{errors:o},setError:l}=v({defaultValues:{is_enabled:!0,provider_id:u,role_id:s?s[0]:void 0}}),f=L({mutationFn:m=>b.post(E.getUserProviderByType(y.LOCAL).create.route,m),onSuccess:()=>r(),onError:m=>l(...U(m))});return e.jsxs(q,{children:[e.jsx(w,{children:"Create local user"}),e.jsxs(C,{className:"lg:max-w-3xl",onSubmit:n(m=>f.mutate(m)),children:[e.jsx(d,{...t("name",h),title:"Name",error:(c=o.name)==null?void 0:c.message,required:!0}),e.jsx(d,{...t("email",h),error:(p=o.email)==null?void 0:p.message,type:"email",title:"Email",required:!0}),e.jsx(d,{...t("password",h),error:(x=o.password)==null?void 0:x.message,type:"password",title:"Password",required:!0}),e.jsx(d,{...t("password_confirm",h),error:(g=o.password_confirm)==null?void 0:g.message,type:"password",title:"Password Confirm",required:!0}),e.jsx(d,{...t("provider_id"),type:"hidden"}),e.jsx(S,{...t("role_id",h),isEmptyOptionVisible:!1,values:i,error:(j=o.role_id)==null?void 0:j.message,title:"Role",required:!0}),e.jsx(F,{...t("is_enabled"),error:(a=o.is_enabled)==null?void 0:a.message,title:"Enabled",titlePosition:"after"}),e.jsx(N,{children:(P=o.root)==null?void 0:P.message}),e.jsxs(O,{children:[e.jsx(A,{to:"..",children:e.jsx(B,{type:"button",className:"me-4 btn-neutral",children:"Discard"})}),e.jsx(R,{className:"btn-primary",isPending:f.isPending,children:"Create"})]})]})]})}function ee({id:r,values:i,callback:u,className:s,roles:t}){var p,x,g,j,a,P;const{register:n,handleSubmit:o,formState:{errors:l},setError:f}=v({defaultValues:{...i,password:D,password_confirm:D}}),c=L({mutationFn:m=>b.put(V(E.getUserProviderByType(y.LOCAL).update.route,r),m),onSuccess:()=>u(),onError:m=>f(...U(m))});return e.jsxs(C,{className:s,onSubmit:o(m=>c.mutate(m)),children:[e.jsx(d,{...n("name",h),title:"Name",error:(p=l.name)==null?void 0:p.message,required:!0}),e.jsx(d,{...n("email",{disabled:!0}),type:"email",title:"Email",required:!0}),e.jsx(d,{...n("password",h),error:(x=l.password)==null?void 0:x.message,type:"password",title:"Password",required:!0}),e.jsx(d,{...n("password_confirm",h),error:(g=l.password_confirm)==null?void 0:g.message,type:"password",title:"Password Confirm",required:!0}),e.jsx(S,{...n("role_id",h),isEmptyOptionVisible:!1,values:t,error:(j=l.role_id)==null?void 0:j.message,title:"Role"}),e.jsx(F,{...n("is_enabled"),error:(a=l.is_enabled)==null?void 0:a.message,title:"Enabled",titlePosition:"after"}),e.jsx(N,{children:(P=l.root)==null?void 0:P.message}),e.jsxs(O,{children:[e.jsx(A,{to:"..",children:e.jsx(B,{type:"button",className:"me-4 btn-neutral",children:"Cancel"})}),e.jsx(R,{isPending:c.isPending,className:"btn-primary",children:"Save Changes"})]})]})}function re({id:r,callback:i,roles:u}){const s=I({queryKey:["users",r],queryFn:()=>b.get(V(E.getUserProviderByType(y.LOCAL).get.route,r)).then(t=>t.data)});return s.isError?e.jsx($,{error:s.error}):s.isLoading?e.jsx(J,{}):s.data?e.jsxs(q,{className:"p-4",children:[e.jsx(w,{children:"Update local user"}),e.jsx(ee,{id:r,values:s.data,className:"lg:max-w-3xl",callback:i,roles:u})]}):null}const T="h-10 w-10";function k(r,i,u){return{get:{route:r,component:void 0},delete:{route:r,component:void 0},create:{route:r,component:i},update:{route:r,component:u}}}const M=[{id:y.LDAP,...k("/api/users",H,X),icon:e.jsx(Y,{className:T,src:z})},{id:y.LOCAL,...k("/api/users",Z,re),icon:e.jsx(G,{className:"stroke-sky-700 shrink-0 "+T})}],E={getUserProviderByType(r){return M.find(i=>i.id===r)},getAllUserProviders(){return M}};export{E as u};

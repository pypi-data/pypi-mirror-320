[tool.poetry]
name = "pozalabs-compose"
version = "1.9.0"
description = "Backend components for Pozalabs"
license = "MIT"
authors = [
    "sunwoong <sunwoong@pozalabs.com>",
    "jeehoon <jeehoon@pozalabs.com>",
    "soyeon <soyeon@pozalabs.com>",
    "joowan <joowan@pozalabs.com>",
]
packages = [{include = "compose"}]

[tool.poetry.dependencies]
python = ">=3.12,<3.13"
pendulum = "^3.0.0"
pymongo = {extras = ["aws"], version = "^4.6.3"}
pydantic = ">=2.7.4,<3.0.0"
boto3 = {version = "^1.28.73", optional = true}
loguru = {version = "^0.7.2", optional = true}
fastapi = {version = "^0.115.2", optional = true}
sentry-sdk = {version = "^2.2.0", optional = true, extras = ["fastapi", "loguru", "pymongo"]}
authlib = "^1.3.1"
opentelemetry-distro = {extras = ["otlp"], version = "^0.46b0", optional = true}
bcrypt = {version = "^4.2.0", optional = true}
httpx = {version = "^0.27.2", optional = true}
dependency-injector = "^4.43.0"

[tool.poetry.group.dev.dependencies]
pre-commit = "^3.7.1"
pytest = "^8.2.2"
boto3-stubs-lite = {extras = ["essential", "ssm"], version = "^1.34.79"}
uvicorn = {extras = ["standard"], version = "^0.29.0"}
gunicorn = "^21.2.0"
opentelemetry-test-utils = "^0.46b0"
testcontainers = {extras = ["mongodb"], version = "^4.7.2"}

[tool.poetry.extras]
aws = ["boto3"]
logging = ["loguru"]
fastapi = ["fastapi"]
sentry = ["sentry-sdk"]
opentelmetry = ["opentelemetry-distro"]
bcrypt = ["bcrypt"]
httpx = ["httpx"]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.ruff]
target-version = "py312"
line-length = 100

[tool.ruff.lint]
select = [
    "E4",
    "E7",
    "E9",
    "F",
    "I",
    "W",
    "RUF022",
    "RUF100",
    "RUF101",
]

[tool.pytest.ini_options]
disable_test_id_escaping_and_forfeit_all_rights_to_community_support = true
filterwarnings = "ignore::DeprecationWarning"
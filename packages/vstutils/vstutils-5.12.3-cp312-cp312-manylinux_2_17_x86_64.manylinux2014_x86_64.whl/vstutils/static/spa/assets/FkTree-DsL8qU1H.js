import{e as ee,f as I,G as te,I as re,j as ne,o as ie,J as se,k as oe}from"./index-DUdvmj-w.js";/*!
 * LiquorTree v0.2.70
 * (c) 2019 amsik
 * Released under the MIT License.
 */var Y={name:"node-content",props:["node"],render:function(e){var t=this,n=this.node,i=this.node.tree.vm;if(n.isEditing){var s=n.text;return this.$nextTick(function(l){t.$refs.editCtrl.focus()}),e("input",{domProps:{value:n.text,type:"text"},class:"tree-input",on:{input:function(a){s=a.target.value},blur:function(){n.stopEditing(s)},keyup:function(a){a.keyCode===13&&n.stopEditing(s)},mouseup:function(a){a.stopPropagation()}},ref:"editCtrl"})}return i.$scopedSlots.default?i.$scopedSlots.default({node:this.node}):e("span",{domProps:{innerHTML:n.text}})}};function T(r,e,t,n,i,s,l,a,c,b){typeof l=="function"&&(a=l,l=!1);var p=typeof t=="function"?t.options:t;r&&r.render&&(p.render=r.render,p.staticRenderFns=r.staticRenderFns,p._compiled=!0,i&&(p.functional=!0));var g;if(e&&(g=l?function(){e.call(this,b(this.$root.$options.shadowRoot))}:function(S){e.call(this,a(S))}),g)if(p.functional){var A=p.render;p.render=function(R,u){return g.call(u),A(R,u)}}else{var O=p.beforeCreate;p.beforeCreate=O?[].concat(O,g):[g]}return t}var ae=Y;Y.__file="NodeContent.vue";var le=void 0,de=void 0,ce=void 0,ue=void 0,fe=T({},le,ae,de,ue,ce,void 0,void 0),H={name:"Node",inject:["tree"],props:["node","options"],components:{NodeContent:fe},watch:{node:function(){this.node.vm=this}},data:function(){return this.node.vm=this,{loading:!1}},computed:{padding:function(){return this.node.depth*(this.options.paddingLeft?this.options.paddingLeft:this.options.nodeIndent)+"px"},nodeClass:function(){var e=this.node.states,t=this.hasChildren(),n={"has-child":t,expanded:t&&e.expanded,selected:e.selected,disabled:e.disabled,matched:e.matched,dragging:e.dragging,loading:this.loading,draggable:e.draggable};return this.options.checkbox&&(n.checked=e.checked,n.indeterminate=e.indeterminate),n},visibleChildren:function(){return this.node.children.filter(function(e){return e&&e.visible()})}},methods:{onNodeFocus:function(){this.tree.activeElement=this.node},focus:function(){this.$refs.anchor.focus(),this.node.select()},check:function(){this.node.checked()?this.node.uncheck():this.node.check()},select:function(e){e===void 0&&(e=evnt);var t=e.ctrlKey,n=this.options,i=this.tree,s=this.node;if(i.$emit("node:clicked",s),!(n.editing&&s.isEditing)){if(n.editing&&s.editable())return this.startEditing();if(n.checkbox&&n.checkOnSelect)return!n.parentSelect&&this.hasChildren()?this.toggleExpand():this.check(t);!n.parentSelect&&this.hasChildren()&&this.toggleExpand(),n.multiple?s.selected()?t?s.unselect():this.tree.selectedNodes.length!=1&&(i.unselectAll(),s.select()):s.select(t):s.selected()&&t?s.unselect():s.select()}},toggleExpand:function(){this.hasChildren()&&this.node.toggleExpand()},hasChildren:function(){return this.node.hasChildren()},startEditing:function(){this.tree._editingNode&&this.tree._editingNode.stopEditing(),this.node.startEditing()},stopEditing:function(){this.node.stopEditing()},handleMouseDown:function(e){this.options.dnd&&this.tree.vm.startDragging(this.node,e)}}},he=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function V(r){return function(e,t){return ge(e,t)}}var pe=document.head||document.getElementsByTagName("head")[0],z={};function ge(r,e){var t=he?e.media||"default":r,n=z[t]||(z[t]={ids:new Set,styles:[]});if(!n.ids.has(r)){n.ids.add(r);var i=e.source;if(e.map&&(i+=`
/*# sourceURL=`+e.map.sources[0]+" */",i+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),pe.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(i),n.element.styleSheet.cssText=n.styles.filter(Boolean).join(`
`);else{var s=n.ids.size-1,l=document.createTextNode(i),a=n.element.childNodes;a[s]&&n.element.removeChild(a[s]),a.length?n.element.insertBefore(l,a[s]):n.element.appendChild(l)}}}var ve=H;H.__file="TreeNode.vue";var me=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("li",{staticClass:"tree-node",class:r.nodeClass,attrs:{"data-id":r.node.id},on:{mousedown:function(n){return n.stopPropagation(),r.handleMouseDown(n)}}},[t("div",{staticClass:"tree-content",style:[r.options.direction=="ltr"?{"padding-left":r.padding}:{"padding-right":r.padding}],on:{click:function(n){return n.stopPropagation(),r.select(n)}}},[t("i",{staticClass:"tree-arrow",class:[{expanded:r.node.states.expanded,"has-child":r.node.children.length||r.node.isBatch},r.options.direction],on:{click:function(n){return n.stopPropagation(),r.toggleExpand(n)}}}),r._v(" "),r.options.checkbox?t("i",{staticClass:"tree-checkbox",class:{checked:r.node.states.checked,indeterminate:r.node.states.indeterminate},on:{click:function(n){return n.stopPropagation(),r.check(n)}}}):r._e(),r._v(" "),t("span",{ref:"anchor",staticClass:"tree-anchor",attrs:{tabindex:"-1"},on:{focus:r.onNodeFocus,dblclick:function(n){return r.tree.$emit("node:dblclick",r.node)}}},[t("node-content",{attrs:{node:r.node}})],1)]),r._v(" "),t("transition",{attrs:{name:"l-fade"}},[r.hasChildren()&&r.node.states.expanded?t("ul",{staticClass:"tree-children"},r._l(r.visibleChildren,function(n){return t("node",{key:n.id,attrs:{node:n,options:r.options}})}),1):r._e()])],1)},be=[],_e=function(r){r&&r("data-v-20094490_0",{source:'.tree-node{white-space:nowrap;display:flex;flex-direction:column;position:relative;box-sizing:border-box}.tree-content{display:flex;align-items:center;padding:3px;cursor:pointer;width:100%;box-sizing:border-box}.tree-node:not(.selected)>.tree-content:hover{background:#f6f8fb}.tree-node.selected>.tree-content{background-color:#e7eef7}.tree-node.disabled>.tree-content:hover{background:inherit}.tree-arrow{flex-shrink:0;height:30px;cursor:pointer;margin-left:30px;width:0}.tree-arrow.has-child{margin-left:0;width:30px;position:relative}.tree-arrow.has-child:after{border:1.5px solid #494646;position:absolute;border-left:0;border-top:0;left:9px;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.has-child.rtl:after{border:1.5px solid #494646;position:absolute;border-right:0;border-bottom:0;right:0;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.expanded.has-child:after{transform:rotate(45deg) translateY(-50%) translateX(-5px)}.tree-checkbox{flex-shrink:0;position:relative;width:30px;height:30px;box-sizing:border-box;border:1px solid #dadada;border-radius:2px;background:#fff;transition:border-color .25s,background-color .25s}.tree-arrow:after,.tree-checkbox:after{position:absolute;display:block;content:""}.tree-checkbox.checked,.tree-checkbox.indeterminate{background-color:#3a99fc;border-color:#218eff}.tree-checkbox.checked:after{box-sizing:content-box;border:1.5px solid #fff;border-left:0;border-top:0;left:9px;top:3px;height:15px;width:8px;transform:rotate(45deg) scaleY(0);transition:transform .25s;transform-origin:center}.tree-checkbox.checked:after{transform:rotate(45deg) scaleY(1)}.tree-checkbox.indeterminate:after{background-color:#fff;top:50%;left:20%;right:20%;height:2px}.tree-anchor{flex-grow:2;outline:0;display:flex;text-decoration:none;color:#343434;vertical-align:top;margin-left:3px;line-height:24px;padding:3px 6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-node.selected>.tree-content>.tree-anchor{outline:0}.tree-node.disabled>.tree-content>.tree-anchor{color:#989191;background:#fff;opacity:.6;cursor:default;outline:0}.tree-input{display:block;width:100%;height:24px;line-height:24px;outline:0;border:1px solid #3498db;padding:0 4px}.l-fade-enter-active,.l-fade-leave-active{transition:opacity .3s,transform .3s;transform:translateX(0)}.l-fade-enter,.l-fade-leave-to{opacity:0;transform:translateX(-2em)}.tree--small .tree-anchor{line-height:19px}.tree--small .tree-checkbox{width:23px;height:23px}.tree--small .tree-arrow{height:23px}.tree--small .tree-checkbox.checked:after{left:7px;top:3px;height:11px;width:5px}.tree-node.has-child.loading>.tree-content>.tree-arrow,.tree-node.has-child.loading>.tree-content>.tree-arrow:after{border-radius:50%;width:15px;height:15px;border:0}.tree-node.has-child.loading>.tree-content>.tree-arrow{font-size:3px;position:relative;border-top:1.1em solid rgba(45,45,45,.2);border-right:1.1em solid rgba(45,45,45,.2);border-bottom:1.1em solid rgba(45,45,45,.2);border-left:1.1em solid #2d2d2d;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);left:5px;-webkit-animation:loading 1.1s infinite linear;animation:loading 1.1s infinite linear;margin-right:8px}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}',map:void 0,media:void 0})},ye=void 0,xe=void 0,$e=!1,ke=T({render:me,staticRenderFns:be},_e,ve,ye,$e,xe,V,void 0),W={name:"DragNode",props:["target"],computed:{style:function(){return this.target.top===void 0?"display: none":"top: "+this.target.top+"px; left: "+this.target.left+"px"}}},Ne=W;W.__file="DraggableNode.vue";var we=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"tree-dragnode",style:r.style},[r._v(`
  `+r._s(r.target.node.text)+`
`)])},De=[],Ce=function(r){r&&r("data-v-7a41ac3e_0",{source:".tree-dragnode{padding:10px;border:1px solid #e7eef7;position:fixed;border-radius:8px;background:#fff;transform:translate(-50%,-110%);z-index:10}",map:void 0,media:void 0})},Ee=void 0,Oe=void 0,Se=!1,Te=T({render:we,staticRenderFns:De},Ce,Ne,Ee,Se,Oe,V,void 0);function N(r,e){var t;return Array.isArray(r)?r.map(function(n){return N(n,e)}):(t=e(r),t!==!1&&r.children&&r.children.length&&(t=N(r.children,e)),t)}function D(r){return document?(D.__element||(D.__element=document.createElement("div")),D.__element.innerHTML=r,D.__element.innerText):r}function Ae(r){return function(e){return Object.keys(r).every(function(t){if(t==="text"||t==="id"){var n=r[t],i=e[t];return i=D(i),Re(n)?n.test(i):n===i}var s=r[t];return t==="state"&&(t="states"),Object.keys(s).every(function(l){return e[t][l]===s[l]})})}}function Re(r){return r instanceof RegExp}function Ie(r){var e=[];return r.forEach(function t(n){e.push(n),n.children&&n.children.forEach(t)}),e}function X(r,e,t){if(t===void 0&&(t=!0),!r||!r.length||!e)return null;if(t&&(r=Ie(r)),typeof e=="number")return r[e]||null;(typeof e=="string"||e instanceof RegExp)&&(e={text:e}),typeof e!="function"&&(e=Ae(e));var n=r.filter(e);return n.length?n:null}function y(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function L(){return y()+y()+"-"+y()+"-"+y()+"-"+y()+"-"+y()+y()+y()}function v(r,e){for(var t=[],n=arguments.length-2;n-- >0;)t[n]=arguments[n+2];r.forEach(function(i){return i[e].apply(i,t)})}var k=function(r){function e(t,n){var i;n===void 0&&(n=[]),r.call(this),this.tree=t,(i=this).push.apply(i,n)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.remove=function(){return v(this,"remove"),this},e.prototype.expand=function(){return v(this,"expand"),this},e.prototype.collapse=function(){return v(this,"collapse"),this},e.prototype.select=function(n){return v(this,"select",n),this},e.prototype.unselect=function(){return v(this,"unselect"),this},e.prototype.check=function(){return this.tree.options.checkbox&&v(this,"check"),this},e.prototype.uncheck=function(){return this.tree.options.checkbox&&v(this,"uncheck"),this},e.prototype.disable=function(){return v(this,"disable"),this},e.prototype.enable=function(){return v(this,"enable"),this},e}(Array),o=function(e,t){if(!t)throw new Error("Node can not be empty");if(this.id=t.id||L(),this.states=t.state||{},this.showChildren=!0,this.children=t.children||[],this.parent=t.parent||null,this.isBatch=t.isBatch||!1,this.isEditing=!1,this.data=Object.assign({},t.data||{},{text:t.text}),!e)throw new Error("Node must have a Tree context!");this.tree=e},E={key:{configurable:!0},depth:{configurable:!0},text:{configurable:!0}};o.prototype.$emit=function(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];(t=this.tree).$emit.apply(t,["node:"+e,this].concat(n))};o.prototype.getPath=function(){if(!this.parent)return[this];for(var e=[this],t=this;(t=t.parent)!==null;)e.push(t);return e};E.key.get=function(){return this.id+this.text};E.depth.get=function(){var r=0,e=this.parent;if(!e||this.showChildren===!1)return r;do r++;while(e=e.parent);return r};E.text.get=function(){return this.data.text};E.text.set=function(r){var e=this.text;e!==r&&(this.data.text=r,this.$emit("text:changed",r,e))};o.prototype.setData=function(e){return this.data=Object.assign({},this.data,e),this.$emit("data:changed",this.data),this.data};o.prototype.state=function(e,t){return t===void 0?this.states[e]:(this.states[e]=t,this)};o.prototype.recurseUp=function(e,t){if(t===void 0&&(t=this),!!t.parent&&e(t.parent)!==!1)return this.recurseUp(e,t.parent)};o.prototype.recurseDown=function(e,t){t!==!0&&e(this),this.hasChildren()&&N(this.children,e)};o.prototype.refreshIndeterminateState=function(){if(!this.tree.options.autoCheckChildren)return this;if(this.state("indeterminate",!1),this.hasChildren()){var e=this.children.length,t=0,n=0,i=0;this.children.forEach(function(s){s.checked()&&t++,s.disabled()&&i++,s.indeterminate()&&n++}),t>0&&t===e-i?this.checked()||(this.state("checked",!0),this.tree.check(this),this.$emit("checked")):(this.checked()&&(this.state("checked",!1),this.tree.uncheck(this),this.$emit("unchecked")),this.state("indeterminate",n>0||t>0&&t<e))}this.parent&&this.parent.refreshIndeterminateState()};o.prototype.indeterminate=function(){return this.state("indeterminate")};o.prototype.editable=function(){return!this.state("disabled")&&this.state("editable")};o.prototype.selectable=function(){return!this.state("disabled")&&this.state("selectable")};o.prototype.selected=function(){return this.state("selected")};o.prototype.select=function(e){return!this.selectable()||this.selected()?this:(this.tree.select(this,e),this.state("selected",!0),this.$emit("selected"),this)};o.prototype.unselect=function(){return!this.selectable()||!this.selected()?this:(this.tree.unselect(this),this.state("selected",!1),this.$emit("unselected"),this)};o.prototype.checked=function(){return this.state("checked")};o.prototype.check=function(){var e=this;if(this.checked()||this.disabled())return this;if(this.indeterminate())return this.uncheck();var t=this.tree.options.checkDisabledChildren,n=this;return this.tree.options.autoCheckChildren?(this.recurseDown(function(i){i.state("indeterminate",!1),!(i.disabled()&&!t)&&(i.checked()||(e.tree.check(i),i.state("checked",!0),i.$emit("checked",i.id===n.id?void 0:n)))}),this.parent&&this.parent.refreshIndeterminateState()):(this.tree.check(this),this.state("checked",!0),this.$emit("checked")),this};o.prototype.uncheck=function(){var e=this;if(!this.indeterminate()&&!this.checked()||this.disabled())return this;var t=this;return this.tree.options.autoCheckChildren?(this.recurseDown(function(n){n.state("indeterminate",!1),n.checked()&&(e.tree.uncheck(n),n.state("checked",!1),n.$emit("unchecked",n.id===t.id?void 0:t))}),this.parent&&this.parent.refreshIndeterminateState()):(this.tree.uncheck(this),this.state("checked",!1),this.$emit("unchecked")),this};o.prototype.show=function(){return this.visible()?this:(this.state("visible",!0),this.$emit("shown"),this)};o.prototype.hide=function(){return this.hidden()?this:(this.state("visible",!1),this.$emit("hidden"),this)};o.prototype.visible=function(){return this.state("visible")};o.prototype.hidden=function(){return!this.state("visible")};o.prototype.enable=function(){return this.enabled()?this:(this.tree.options.autoDisableChildren?this.recurseDown(function(e){e.disabled()&&(e.state("disabled",!1),e.$emit("enabled"))}):(this.state("disabled",!1),this.$emit("enabled")),this)};o.prototype.enabled=function(){return!this.state("disabled")};o.prototype.disable=function(){return this.disabled()?this:(this.tree.options.autoDisableChildren?this.recurseDown(function(e){e.enabled()&&(e.state("disabled",!0),e.$emit("disabled"))}):(this.state("disabled",!0),this.$emit("disabled")),this)};o.prototype.disabled=function(){return this.state("disabled")};o.prototype.expandTop=function(e){var t=this;this.recurseUp(function(n){n.state("expanded",!0),e!==!0&&t.$emit("expanded",n)})};o.prototype.expand=function(){var e=this;return this.canExpand()?(this.isBatch?this.tree.loadChildren(this).then(function(t){e.state("expanded",!0),e.$emit("expanded")}):(this.state("expanded",!0),this.$emit("expanded")),this):this};o.prototype.canExpand=function(){return this.disabled()||!this.hasChildren()?!1:this.collapsed()&&(!this.tree.autoDisableChildren||this.disabled())};o.prototype.canCollapse=function(){return this.disabled()||!this.hasChildren()?!1:this.expanded()&&(!this.tree.autoDisableChildren||this.disabled())};o.prototype.expanded=function(){return this.state("expanded")};o.prototype.collapse=function(){return this.canCollapse()?(this.state("expanded",!1),this.$emit("collapsed"),this):this};o.prototype.collapsed=function(){return!this.state("expanded")};o.prototype.toggleExpand=function(){return this._toggleOpenedState()};o.prototype.toggleCollapse=function(){return this._toggleOpenedState()};o.prototype._toggleOpenedState=function(){if(this.canCollapse())return this.collapse();if(this.canExpand())return this.expand()};o.prototype.isDropable=function(){return this.enabled()&&this.state("dropable")};o.prototype.isDraggable=function(){return this.enabled()&&this.state("draggable")&&!this.isEditing};o.prototype.startDragging=function(){return!this.isDraggable()||this.state("dragging")||this.isRoot()&&this.tree.model.length===1?!1:(this.tree.options.store&&(this.tree.__silence=!0),this.select(),this.state("dragging",!0),this.$emit("dragging:start"),this.tree.__silence=!1,!0)};o.prototype.finishDragging=function(e,t){if(!(!e.isDropable()&&t==="drag-on")){var n=this.tree,i=this.clone(),s=this.parent;i.id=this.id,n.__silence=!0,this.remove(),t==="drag-on"?n.append(e,i):t==="drag-below"?n.after(e,i):t==="drag-above"&&n.before(e,i),e.refreshIndeterminateState(),s&&s.refreshIndeterminateState(),n.__silence=!1,i.state("dragging",!1),this.state("dragging",!1),i.$emit("dragging:finish",e,t),i.state("selected")&&(n.selectedNodes.remove(this),n.selectedNodes.add(i),n.vm.$set(this.state,"selected",!1),n.vm.$set(i.state,"selected",!0)),this.tree.options.store&&this.tree.vm.$emit("LIQUOR_NOISE")}};o.prototype.startEditing=function(){if(this.disabled())return!1;this.isEditing||(this.tree._editingNode=this,this.tree.activeElement=this,this.isEditing=!0,this.$emit("editing:start"))};o.prototype.stopEditing=function(e){if(this.isEditing){this.isEditing=!1,this.tree._editingNode=null,this.tree.activeElement=null;var t=this.text;e&&e!==!1&&this.text!==e&&(this.text=e),this.$emit("editing:stop",t)}};o.prototype.index=function(e){return this.tree.index(this,e)};o.prototype.first=function(){return this.hasChildren()?this.children[0]:null};o.prototype.last=function(){return this.hasChildren()?this.children[this.children.length-1]:null};o.prototype.next=function(){return this.tree.nextNode(this)};o.prototype.prev=function(){return this.tree.prevNode(this)};o.prototype.insertAt=function(e,t){var n=this;if(t===void 0&&(t=this.children.length),!!e)return e=this.tree.objectToNode(e),Array.isArray(e)?(e.reverse().map(function(i){return n.insertAt(i,t)}),new k(this.tree,[].concat(e))):(e.parent=this,this.children.splice(t,0,e),e.disabled()&&e.hasChildren()&&e.recurseDown(function(i){i.state("disabled",!0)}),this.isBatch||this.$emit("added",e),e)};o.prototype.addChild=function(e){return this.insertAt(e)};o.prototype.append=function(e){return this.addChild(e)};o.prototype.prepend=function(e){return this.insertAt(e,0)};o.prototype.before=function(e){return this.tree.before(this,e)};o.prototype.after=function(e){return this.tree.after(this,e)};o.prototype.empty=function(){for(var e;e=this.children.pop();)e.remove();return this};o.prototype.remove=function(){return this.tree.removeNode(this)};o.prototype.removeChild=function(e){var t=this.find(e);return t?this.tree.removeNode(t):null};o.prototype.find=function(e,t){return this.tree.isNode(e)?e:X(this.children,e,t)};o.prototype.focus=function(){this.vm&&this.vm.focus()};o.prototype.hasChildren=function(){return this.showChildren&&this.isBatch||this.children.length>0};o.prototype.isRoot=function(){return this.parent===null};o.prototype.clone=function(){return this.tree.objectToNode(this.toJSON())};o.prototype.toJSON=function(){var e=this;return{text:this.text,data:this.data,state:this.states,children:this.children.map(function(t){return e.tree.objectToNode(t).toJSON()})}};Object.defineProperties(o.prototype,E);var Pe={selected:!1,selectable:!0,checked:!1,expanded:!1,disabled:!1,visible:!0,indeterminate:!1,matched:!1,editable:!0,dragging:!1,draggable:!0,dropable:!0};function j(r){return r===void 0&&(r={}),Object.assign({},Pe,r)}function C(r,e){var t=null;if(e instanceof o)return e;if(typeof e=="string")t=new o(r,{text:e,state:j(),id:L()});else{if(Array.isArray(e))return e.map(function(n){return C(r,n)});t=new o(r,e),t.states=j(t.states),t.id||(t.id=L()),t.children.length&&(t.children=t.children.map(function(n){return n=C(r,n),n.parent=t,n}))}return t}var J=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.empty=function(){return this.splice(0,this.length),this},e.prototype.has=function(n){return this.includes(n)},e.prototype.add=function(){for(var n,i=[],s=arguments.length;s--;)i[s]=arguments[s];return(n=this).push.apply(n,i),this},e.prototype.remove=function(n){var i=this.indexOf(n);return i===-1?this:(this.splice(i,1),this)},e.prototype.removeAll=function(n){for(;this.includes(n);)this.remove(n);return this},e.prototype.top=function(){return this[this.length-1]},e}(Array),Fe={id:"id",text:"text",children:"children",state:"state",data:"data",isBatch:"isBatch"};function Le(r,e){return{id:r[e.id],text:r[e.text],children:r[e.children],state:r[e.state],data:r[e.data],isBatch:r[e.isBatch]}}var Me={parse:function(e,t,n){n===void 0&&(n={}),typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)||(e=[e]);var i=Object.assign({},Fe,n),s=e.map(function l(a){var c=Le(a,i);return c.children&&!Array.isArray(c.children)&&(c.children=[c.children]),c.children&&(c.children=c.children.map(l)),c});return s.map(function(l){return C(t,l)})}};function Ve(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(i){try{var s=JSON.parse(n.response);e(s)}catch(l){t(l)}}),n.send(null)})}function q(r){return Ve(r)}function Be(r){return function(e){for(var t=/{([^}]+)}/,n,i=r;n=t.exec(i);)i=i.replace(n[0],e[n[1]]);return i}}function ze(r,e){return r.text<e.text?-1:r.text>e.text?1:0}function je(r,e){return r.text<e.text?1:r.text>e.text?-1:0}function Je(r){switch(r.toLowerCase()){case"asc":return ze;case"desc":return je}}function U(r,e){typeof e=="string"&&(e=Je(e)),Array.isArray(r)&&typeof e=="function"&&r.sort(e)}function Ue(r){return new Promise(function(e){setTimeout(e,r)})}var d=function(e){var t=this;this.vm=e,this.options=e.opts,this.activeElement=null;var n=this.options.fetchData;typeof n=="string"&&(this.options.fetchData=function(i){var s=Be(i);return function(l){return q(s(l)).catch(t.options.onFetchError)}}(n))};d.prototype.$on=function(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];(t=this.vm).$on.apply(t,[e].concat(n))};d.prototype.$once=function(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];(t=this.vm).$once.apply(t,[e].concat(n))};d.prototype.$off=function(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];(t=this.vm).$off.apply(t,[e].concat(n))};d.prototype.$emit=function(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];this.__silence||((t=this.vm).$emit.apply(t,[e].concat(n)),this.options.store&&this.vm.$emit("LIQUOR_NOISE"))};d.prototype._sort=function(e,t,n){n!==!1&&this.recurseDown(e,function(i){i.hasChildren()&&U(i.children,t)}),U(e,t)};d.prototype.sortTree=function(e,t){this._sort(this.model,e,t)};d.prototype.sort=function(e,t,n){var i=this,s=this.find(e,!0);!s||!t||s.forEach(function(l){i._sort(l.children,t,n)})};d.prototype.clearFilter=function(){this.recurseDown(function(e){e.state("matched",!1),e.state("visible",!0),e.state("expanded",e.__expanded),e.__expanded=void 0,e.showChildren=!0}),this.vm.matches.length=0,this.vm.$emit("tree:filtered",[],"")};d.prototype.filter=function(e){if(!e)return this.clearFilter();var t=[],n=this.options.filter.matcher,i=this.options.filter,s=i.showChildren,l=i.plainList;return this.recurseDown(function(a){n(e,a)&&t.push(a),a.showChildren=!0,a.__expanded===void 0&&(a.__expanded=a.state("expanded")),a.state("visible",!1),a.state("matched",!1),a.state("expanded",!0)}),t.reverse().forEach(function(a){a.state("matched",!0),a.state("visible",!0),a.showChildren=!l,a.hasChildren()&&a.recurseDown(function(c){c.state("visible",!!s)},!0),a.recurseUp(function(c){c.state("visible",!0),c.state("expanded",!0)}),a.hasChildren()&&a.state("expanded",!1)}),this.vm.matches=t,this.vm.$emit("tree:filtered",t,e),t};d.prototype.selected=function(){return new(Function.prototype.bind.apply(k,[null].concat([this],this.selectedNodes)))};d.prototype.checked=function(){return this.options.checkbox?new(Function.prototype.bind.apply(k,[null].concat([this],this.checkedNodes))):null};d.prototype.loadChildren=function(e){var t=this;if(e){this.$emit("tree:data:fetch",e),this.options.minFetchDelay>0&&e.vm&&(e.vm.loading=!0);var n=this.fetch(e).then(function(i){e.append(i),e.isBatch=!1,t.options.autoCheckChildren&&(e.checked()&&e.recurseDown(function(s){s.state("checked",!0)}),e.refreshIndeterminateState()),t.$emit("tree:data:received",e)});return Promise.all([Ue(this.options.minFetchDelay),n]).then(function(i){return e.vm&&(e.vm.loading=!1),n})}};d.prototype.fetch=function(e,t){var n=this,i=this.options.fetchData(e);return i.then||(i=q(i).catch(this.options.onFetchError)),t===!1?i:i.then(function(s){try{return n.parse(s,n.options.modelParse)}catch(l){throw new Error(l)}}).catch(this.options.onFetchError)};d.prototype.fetchInitData=function(){var e={id:"root",name:"root"};return this.fetch(e,!1)};d.prototype.setModel=function(e){var t=this;return new Promise(function(n){if(t.model=t.parse(e,t.options.modelParse),requestAnimationFrame(function(s){t.vm.model=t.model,n()}),t.selectedNodes=new J,t.checkedNodes=new J,N(t.model,function(s){s.tree=t,s.selected()&&t.selectedNodes.add(s),s.checked()&&(t.checkedNodes.add(s),s.parent&&s.parent.refreshIndeterminateState()),t.options.autoDisableChildren&&s.disabled()&&s.recurseDown(function(l){l.state("disabled",!0)})}),!t.options.multiple&&t.selectedNodes.length){var i=t.selectedNodes.top();t.selectedNodes.forEach(function(s){i!==s&&s.state("selected",!1)}),t.selectedNodes.empty().add(i)}t.options.checkOnSelect&&t.options.checkbox&&t.unselectAll()})};d.prototype.recurseDown=function(e,t){return!t&&e&&(t=e,e=this.model),N(e,t)};d.prototype.select=function(e,t){var n=this.getNode(e);return n?(this.options.multiple&&t?this.selectedNodes.add(n):(this.unselectAll(),this.selectedNodes.empty().add(n)),!0):!1};d.prototype.selectAll=function(){var e=this;return this.options.multiple?(this.selectedNodes.empty(),this.recurseDown(function(t){e.selectedNodes.add(t.select(!0))}),!0):!1};d.prototype.unselect=function(e){var t=this.getNode(e);return t?(this.selectedNodes.remove(t),!0):!1};d.prototype.unselectAll=function(){for(var e;e=this.selectedNodes.pop();)e.unselect();return!0};d.prototype.check=function(e){this.checkedNodes.add(e)};d.prototype.uncheck=function(e){this.checkedNodes.remove(e)};d.prototype.checkAll=function(){this.recurseDown(function(e){e.depth===0&&(e.indeterminate()&&e.state("indeterminate",!1),e.check())})};d.prototype.uncheckAll=function(){for(var e;e=this.checkedNodes.pop();)e.uncheck();return!0};d.prototype.expand=function(e){return e.expanded()?!1:(e.expand(),!0)};d.prototype.collapse=function(e){return e.collapsed()?!1:(e.collapse(),!0)};d.prototype.toggleExpand=function(e){return e.hasChildren()?(e.toggleExpand(),!0):!1};d.prototype.toggleCollapse=function(e){return e.hasChildren()?(e.toggleCollapse(),!0):!1};d.prototype.expandAll=function(){this.recurseDown(function(e){e.hasChildren()&&e.collapsed()&&e.expand()})};d.prototype.collapseAll=function(){this.recurseDown(function(e){e.hasChildren()&&e.expanded()&&e.collapse()})};d.prototype.index=function(e,t){var n=e.parent;n?n=n.children:n=this.model;var i=n.indexOf(e);return t?{index:i,target:n,node:n[i]}:i};d.prototype.nextNode=function(e){var t=this.index(e,!0),n=t.target,i=t.index;return n[i+1]||null};d.prototype.nextVisibleNode=function(e){if(e.hasChildren()&&e.expanded())return e.first();var t=this.nextNode(e);return!t&&e.parent?e.parent.next():t};d.prototype.prevNode=function(e){var t=this.index(e,!0),n=t.target,i=t.index;return n[i-1]||null};d.prototype.prevVisibleNode=function(e){var t=this.prevNode(e);return t?t.hasChildren()&&t.expanded()?t.last():t:e.parent};d.prototype.addToModel=function(e,t){var n=this;return t===void 0&&(t=this.model.length),e=this.objectToNode(e),this.model.splice(t,0,e),this.recurseDown(e,function(i){i.tree=n}),this.$emit("node:added",e),e};d.prototype.append=function(e,t){var n=this.find(e);return n?n.append(t):!1};d.prototype.prepend=function(e,t){var n=this.find(e);return n?n.prepend(t):!1};d.prototype.before=function(e,t){e=this.find(e);var n=this.index(e,!0),i=this.objectToNode(t);return~n.index?(n.target.splice(n.index,0,i),i.parent=e.parent,this.$emit("node:added",i),i):!1};d.prototype.after=function(e,t){e=this.find(e);var n=this.index(e,!0),i=this.objectToNode(t);return~n.index?(n.target.splice(n.index+1,0,i),i.parent=e.parent,this.$emit("node:added",i),i):!1};d.prototype.addNode=function(e){var t=this.model.length;return e=C(e),this.model.splice(t,0,e),this.$emit("node:added",e),e};d.prototype.remove=function(e,t){return this.removeNode(this.find(e,t))};d.prototype.removeNode=function(e){if(e instanceof k)return e.remove();if(!e)return!1;if(!e.parent)~this.model.indexOf(e)&&this.model.splice(this.model.indexOf(e),1);else{var t=e.parent.children;~t.indexOf(e)&&t.splice(t.indexOf(e),1)}e.parent&&e.parent.indeterminate()&&!e.parent.hasChildren()&&e.parent.state("indeterminate",!1),this.activeElement!==null&&e.id===this.activeElement.id&&(this.activeElement=null),e.parent=null,this.$emit("node:removed",e),this.selectedNodes.remove(e),this.checkedNodes.remove(e);var n=this.vm.matches;return n&&n.length&&n.includes(e)&&n.splice(n.indexOf(e),1),e};d.prototype.isNode=function(e){return e instanceof o};d.prototype.find=function(e,t){if(this.isNode(e))return e;var n=X(this.model,e);return!n||!n.length?new k(this,[]):t===!0?new k(this,n):new k(this,[n[0]])};d.prototype.updateData=function(e,t){var n=this.find(e);return n.forEach(function(i){return i.setData(t(i))}),n};d.prototype.getNodeById=function(e){var t=null;return N(this.model,function(n){if(""+n.id===e)return t=n,!1}),t};d.prototype.getNode=function(e){return this.isNode(e)?e:null};d.prototype.objectToNode=function(e){return C(this,e)};d.prototype.parse=function(e,t){t||(t=this.options.propertyNames);try{return Me.parse(e,this,t)}catch{return[]}};var x={ARROW_LEFT:37,ARROW_TOP:38,ARROW_RIGHT:39,ARROW_BOTTOM:40,SPACE:32,DELETE:46,ENTER:13,ESC:27},Ye=[37,38,39,40,32];function G(r,e){var t=r.prevVisibleNode(e);if(t){if(t.disabled())return G(r,t);t.focus()}}function K(r,e){var t=r.nextVisibleNode(e);if(t){if(t.disabled())return K(r,t);t.focus()}}function He(r,e){r.options.checkbox&&(e.checked()?e.uncheck():e.check())}function We(r,e){if(e.expanded())e.collapse();else{var t=e.parent;t&&t.focus()}}function Xe(r,e){if(e.collapsed())e.expand();else{var t=e.first();t&&t.focus()}}function qe(r,e){var t=r.options.deletion;t&&(typeof t=="function"?t(e)===!0&&e.remove():t===!0&&e.remove())}function Ge(r){var e=r.vm,t=e.$el;t.addEventListener("keydown",function(n){var i=n.keyCode,s=r.activeElement;if(r.isNode(s))if(s.isEditing)switch(i){case x.ESC:return s.stopEditing(!1)}else switch(Ye.includes(i)&&(n.preventDefault(),n.stopPropagation()),i){case x.ARROW_LEFT:return We(r,s);case x.ARROW_RIGHT:return Xe(r,s);case x.ARROW_TOP:return G(r,s);case x.ARROW_BOTTOM:return K(r,s);case x.SPACE:case x.ENTER:return He(r,s);case x.DELETE:return qe(r,s)}},!0)}function P(r,e){if(r===!1)throw new Error(e)}function Ke(r){var e=r.opts,t=e.multiple,n=e.checkbox,i=r.tree,s=function(l){var a=r.selected();n?r.$emit("input",{selected:t?a:a[0]||null,checked:r.checked()}):r.$emit("input",t?a:a[0]||null)};s(),i.$on("node:selected",s),i.$on("node:unselected",s),n&&(i.$on("node:checked",s),i.$on("node:unchecked",s)),i.$on("node:added",function(l,a){var c=a||l;n&&(c.state("checked")&&!i.checkedNodes.has(c)&&i.checkedNodes.add(c),c.refreshIndeterminateState()),c.state("selected")&&!i.selectedNodes.has(c)&&i.select(c),s()})}var Qe={mounted:function(){var e=this,t=new d(this),n;this.tree=t,this._provided.tree=t,!this.data&&this.opts.fetchData?n=t.fetchInitData():this.data&&this.data.then?(n=this.data,this.loading=!0):n=Promise.resolve(this.data),n.then(function(i){i||(i=[]),e.opts.store?e.connectStore(e.opts.store):e.tree.setModel(i),e.loading&&(e.loading=!1),e.$emit("tree:mounted",e),Ke(e)}),this.opts.keyboardNavigation!==!1&&Ge(t)},methods:{connectStore:function(e){var t=this,n=e.store,i=e.mutations,s=e.getter,l=e.dispatcher;P(typeof s=="function","`getter` must be a function"),P(typeof l=="function","`dispatcher` must be a function"),i!==void 0&&P(Array.isArray(i),"`mutations` must be an array"),n.subscribe(function(a,c){i?i.includes(a.type)&&t.tree.setModel(s()):t.tree.setModel(s())}),this.tree.setModel(s()),this.$on("LIQUOR_NOISE",function(){t.$nextTick(function(a){l(t.toJSON())})})},recurseDown:function(e){this.tree.recurseDown(e)},selected:function(){return this.tree.selected()},checked:function(){return this.tree.checked()},append:function(e,t){return t?this.tree.append(e,t):this.tree.addToModel(e,this.tree.model.length)},prepend:function(e,t){return t?this.tree.prepend(e,t):this.tree.addToModel(e,0)},addChild:function(e,t){return this.append(e,t)},remove:function(e,t){return this.tree.remove(e,t)},before:function(e,t){return t?this.tree.before(e,t):this.prepend(e)},after:function(e,t){return t?this.tree.after(e,t):this.append(e)},find:function(e,t){return this.tree.find(e,t)},findAll:function(e){return this.tree.find(e,!0)},expandAll:function(){return this.tree.expandAll()},updateData:function(e,t){return this.tree.updateData(e,t)},collapseAll:function(){return this.tree.collapseAll()},sortTree:function(e,t){return this.tree.sortTree(e,t)},sort:function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this.tree).sort.apply(e,t)},setModel:function(e){return this.tree.setModel(e)},getRootNode:function(){return this.tree.model.length===1?this.tree.model[0]:this.tree.model},toJSON:function(){return JSON.parse(JSON.stringify(this.model))}}},m={ABOVE:"drag-above",BELOW:"drag-below",ON:"drag-on"};function Ze(r,e){return Math.abs(r.clientX-e[0])>5||Math.abs(r.clientY-e[1])>5}function et(r){for(var e=r.target,t=[];e;){if(t.push(e),e.tagName==="HTML")return t.push(document),t.push(window),t;e=e.parentElement}return t}function tt(r){return r.path?r.path:r.composedPath?r.composedPath():et(r)}function rt(r){for(var e,t=0,n=tt(r);t<n.length;t++)if(e=n[t].className||"",/tree-node/.test(e))return n[t];return null}function nt(r){var e=rt(r);return e||null}function M(r,e){if(r){var t=r.className;if(e)new RegExp(e).test(t)||(t+=" "+e);else{for(var n in m)t=t.replace(m[n],"");t.replace("dragging","")}r.className=t.replace(/\s+/g," ")}}function it(r,e){var t=e.getBoundingClientRect(),n=t.height/3,i=m.ON;return t.top+n>=r.clientY?i=m.ABOVE:t.top+n*2<=r.clientY&&(i=m.BELOW),i}function F(r,e,t){if(!(!e||!e[t]||typeof e[t]!="function"))return e[t].apply(e,r)!==!1}function st(r){for(var e in m)for(var t=r.querySelectorAll("."+m[e]),n=0;n<t.length;n++)M(t[n])}var ot={methods:{onDragStart:function(e){e.preventDefault()},startDragging:function(e,t){!e.isDraggable()||F([e],this.tree.options.dnd,"onDragStart")===!1||(this.$$startDragPosition=[t.clientX,t.clientY],this.$$possibleDragNode=e,this.initDragListeners())},initDragListeners:function(){var e=this,t,n=function(){window.removeEventListener("mouseup",i,!0),window.removeEventListener("mousemove",s,!0)},i=function(l){if(e.$$startDragPosition||l.stopPropagation(),e.draggableNode&&e.draggableNode.node.state("dragging",!1),e.$$dropDestination&&e.tree.isNode(e.$$dropDestination)&&e.$$dropDestination.vm){M(e.$$dropDestination.vm.$el,null);var a=F([e.draggableNode.node,e.$$dropDestination,t],e.tree.options.dnd,"onDragFinish");a!==!1&&!(!e.$$dropDestination.isDropable()&&t===m.ON||!t)&&(e.draggableNode.node.finishDragging(e.$$dropDestination,t),e.draggableNode.node.parent=e.$$dropDestination),e.$$dropDestination=null}e.$$possibleDragNode=null,e.$set(e,"draggableNode",null),n()},s=function(l){if(!(e.$$startDragPosition&&!Ze(l,e.$$startDragPosition))){if(e.$$startDragPosition=null,e.$$possibleDragNode){if(e.$$possibleDragNode.startDragging()===!1){n(),e.$$possibleDragNode=null;return}e.$set(e,"draggableNode",{node:e.$$possibleDragNode,left:0,top:0}),e.$$possibleDragNode=null}e.draggableNode.left=l.clientX,e.draggableNode.top=l.clientY;var a=nt(l);if(st(e.$el),a){var c=a.getAttribute("data-id");if(e.draggableNode.node.id===c)return;if((!e.$$dropDestination||e.$$dropDestination.id!==c)&&(e.$$dropDestination=e.tree.getNodeById(c)),e.$$dropDestination&&e.draggableNode.node){var b=e.$$dropDestination.getPath();if(b.includes(e.draggableNode.node)){e.$$dropDestination=null;return}}t=it(l,a);var p=F([e.draggableNode.node,e.$$dropDestination,t],e.tree.options.dnd,"onDragOn"),g=e.$$dropDestination.isDropable()&&p!==!1;!g&&t===m.ON&&(t=null),M(a,t)}}};window.addEventListener("mouseup",i,!0),window.addEventListener("mousemove",s,!0)}}},at={direction:"ltr",multiple:!0,checkbox:!1,checkOnSelect:!1,autoCheckChildren:!0,autoDisableChildren:!0,checkDisabledChildren:!0,parentSelect:!1,keyboardNavigation:!0,nodeIndent:24,minFetchDelay:0,fetchData:null,propertyNames:null,deletion:!1,dnd:!1,editing:!1,onFetchError:function(r){throw r}},lt={emptyText:"Nothing found!",matcher:function(e,t){var n=new RegExp(e,"i").test(t.text);return n&&t.parent&&new RegExp(e,"i").test(t.parent.text)?!1:n},plainList:!1,showChildren:!0},Q={name:"Tree",components:{TreeNode:ke,DraggableNode:Te},mixins:[Qe,ot],provide:function(r){return{tree:null}},props:{data:{},options:{type:Object,default:function(r){return{}}},filter:String,tag:{type:String,default:"div"}},watch:{filter:function(e){this.tree.filter(e)}},computed:{visibleModel:function(){return this.model.filter(function(e){return e&&e.visible()})},visibleMatches:function(){return this.matches.filter(function(e){return e&&e.visible()})}},data:function(){var e=Object.assign({},at,this.options);return e.filter=Object.assign({},lt,e.filter),{model:[],tree:null,loading:!1,opts:e,matches:[],draggableNode:null}}},dt=Q;Q.__file="TreeRoot.vue";var ct=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t(r.tag,{tag:"component",class:{tree:!0,"tree-loading":this.loading,"tree--draggable":!!this.draggableNode},attrs:{role:"tree"}},[r.filter&&r.matches.length==0?[t("div",{staticClass:"tree-filter-empty",domProps:{innerHTML:r._s(r.opts.filter.emptyText)}})]:[t("ul",{staticClass:"tree-root",on:{dragstart:r.onDragStart}},[r.opts.filter.plainList&&r.matches.length>0?r._l(r.visibleMatches,function(n){return t("TreeNode",{key:n.id,attrs:{node:n,options:r.opts}})}):r._l(r.visibleModel,function(n){return t("TreeNode",{key:n.id,attrs:{node:n,options:r.opts}})})],2)],r._v(" "),r.draggableNode?t("DraggableNode",{attrs:{target:r.draggableNode}}):r._e()],2)},ut=[],ft=function(r){r&&r("data-v-6db2091d_0",{source:".tree{overflow:auto}.tree-children,.tree-root{list-style:none;padding:0}.tree>.tree-filter-empty,.tree>.tree-root{padding:3px;box-sizing:border-box}.tree.tree--draggable .tree-node:not(.selected)>.tree-content:hover{background:0 0}.drag-above,.drag-below,.drag-on{position:relative;z-index:1}.drag-on>.tree-content{background:#fafcff;outline:1px solid #7baff2}.drag-above>.tree-content::before,.drag-below>.tree-content::after{display:block;content:'';position:absolute;height:8px;left:0;right:0;z-index:2;box-sizing:border-box;background-color:#3367d6;border:3px solid #3367d6;background-clip:padding-box;border-bottom-color:transparent;border-top-color:transparent;border-radius:0}.drag-above>.tree-content::before{top:0;transform:translateY(-50%)}.drag-below>.tree-content::after{bottom:0;transform:translateY(50%)}",map:void 0,media:void 0})},ht=void 0,pt=void 0,gt=!1,w=T({render:ct,staticRenderFns:ut},ft,dt,ht,gt,pt,V,void 0),vt=function(r){r.component(w.name,w)};w.install=vt;typeof window<"u"&&window.Vue&&window.Vue.use(w);const mt=Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"})),bt=ee({__name:"FkTree",props:{value:null,field:null,multiple:{type:Boolean},minItems:{default:0},maxItems:{default:Number.POSITIVE_INFINITY}},emits:["update:value"],setup(r,{emit:e}){const t=r,n=w||mt,i=I(!1),s=I(),l=te([]),a=I(""),c={multiple:t.multiple,filter:{emptyText:re.t("Nothing found!")}};function b(u,f){e("update:value",u,f)}const p=ne(()=>i.value?t.value.map(u=>{const f=t.field.getValueFieldValue(u),$=[];let h=s.value.find(_=>_.id===f)[0];for(;h;)$.unshift(String(t.field.getViewFieldValue(h.data.instance))),h=h.parent;return{id:f,path:$}}):[]);function g(){for(const u of t.value){const f=t.field.getValueFieldValue(u);let h=s.value.find(_=>_.id===f)[0];if(h)for(h.select(!0);h.parent;)h=h.parent,h.expand();else console.warn("Have no node for value",t.field.model,t.field.name,f)}i.value=!0}function A(u){if(u.target&&u.target instanceof Element&&!u.target.classList.contains("tree-arrow")){u.stopPropagation();const f=u.target.closest(".tree-node");if(f){const $=f.getAttribute("data-id"),_=s.value.find(B=>String(B.id)===$)[0];if(_){if(t.value.some(Z=>t.field.getValueFieldValue(Z)===_.id)){_.unselect();return}if(t.value.length<t.maxItems){_.select(t.multiple);return}}}}}function O(u){i.value&&b(u.tree.selectedNodes.map(f=>f.data.instance))}function S(u){i.value&&b(u.tree.selectedNodes.map(f=>f.data.instance))}function R(u){s.value.find(f=>f.id===u).unselect()}return ie(async()=>{const u=await t.field.makeRequest();l.value=t.field.createTreeData(u),t.value.length!==0&&b(t.value.map(f=>{const $=t.field.getValueFieldValue(f);return u.find(h=>t.field.getValueFieldValue(h)===$)}),{markChanged:!1}),await se(),g()}),{__sfc:!0,Tree:n,props:t,emit:e,initialized:i,tree:s,treeData:l,treeFilter:a,treeOptions:c,updateValue:b,selectedItems:p,selectOnLoad:g,handleClick:A,selected:O,unselected:S,removeValue:R}}});var _t=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"input-group d-flex flex-column"},[t("div",{staticClass:"input-group-sm mb-1 d-flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.treeFilter,expression:"treeFilter"}],staticClass:"form-control",staticStyle:{"border-radius":"3px 0px 0px 3px"},attrs:{type:"text",placeholder:e.$ts("Search"),"aria-label":"Search"},domProps:{value:n.treeFilter},on:{input:function(i){i.target.composing||(n.treeFilter=i.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-outline-secondary",staticStyle:{"border-radius":"0 3px 3px 0"},attrs:{type:"button"},on:{click:function(i){n.treeFilter=""}}},[t("i",{staticClass:"fa fa-times"})])])]),t("div",{staticClass:"selected-items"},e._l(n.selectedItems,function(i){return t("div",{key:String(i.id),staticClass:"badge badge-info"},[e._l(i.path,function(s,l){return t("span",{key:l},[e._v(" "+e._s(s)+" "),l<i.path.length-1?t("span",{staticClass:"path-separator"},[e._v("/")]):e._e()])}),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(s){return n.removeValue(i.id)}}},[t("i",{staticClass:"fa fa-times ml-2"})])],2)}),0),n.treeData.length>0?t(n.Tree,{ref:"tree",attrs:{options:n.treeOptions,filter:n.treeFilter,data:n.treeData},on:{"node:selected":n.selected,"node:unselected":n.unselected},nativeOn:{"!click":function(i){return n.handleClick.apply(null,arguments)}}}):e._e()],1)},yt=[],xt=oe(bt,_t,yt,!1,null,"026a06e6");const kt=xt.exports;export{kt as default};

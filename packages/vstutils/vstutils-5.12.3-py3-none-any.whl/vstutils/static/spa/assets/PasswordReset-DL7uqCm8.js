import{e as c,f as l,k as p}from"./index-DUdvmj-w.js";import{F as d}from"./FormGroup-DkpsYL_6.js";import{c as f,b as _}from"./index-DKlBORNq.js";import{B as v}from"./BackButton-BOFj7rBD.js";const y=c({__name:"PasswordReset",setup(m){const e=f(),{i18n:s}=_(),t=l("INITIAL"),a=l(""),r=l([]);async function o(){t.value="LOADING";try{const n=new URL("oauth2/password_reset/",e.api.url);n.search=new URLSearchParams({lang:s.locale}).toString();const i=await fetch(n,{method:"POST",body:JSON.stringify({email:a.value}),headers:{"Content-Type":"application/json"}});if(!i.ok){if(i.status===400){const u=await i.json();if(u.email){r.value=u.email,t.value="INITIAL";return}}throw new Error("Invalid response")}t.value="SUCCESS"}catch{t.value="ERROR"}}return{__sfc:!0,config:e,i18n:s,state:t,email:a,emailErrors:r,submit:o,FormGroup:d,BackButton:v}}});var w=function(){var e=this,s=e._self._c,t=e._self._setupProxy;return t.state==="INITIAL"||t.state==="LOADING"?s("form",{on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[s("p",[e._v(" "+e._s(e.$t("Forgot your password? Enter your email address below, and an email with instructions for setting a new one will be sent."))+" ")]),s(t.FormGroup,{attrs:{label:"Email",errors:t.emailErrors},scopedSlots:e._u([{key:"default",fn:function({classes:a,id:r}){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:a,attrs:{id:r,type:"email",name:"email"},domProps:{value:t.email},on:{input:function(o){o.target.composing||(t.email=o.target.value)}}})]}}],null,!1,3704277616)}),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.state==="LOADING"}},[e._v(" "+e._s(e.$t("Reset my Password"))+" ")]),s(t.BackButton,{staticStyle:{"margin-top":"16px"}})],1):t.state==="ERROR"?s("p",[e._v(" "+e._s(e.$t("An error occurred. Please try again later."))+" ")]):t.state==="SUCCESS"?s("p",[e._v(" "+e._s(e.$t("We've emailed you instructions for setting your password, if an account exists with the email you entered. You should receive them shortly."))+" "),s("br"),e._v(" "+e._s(e.$t("If you don't receive an email, please make sure you've entered the address you registered with, and check your spam folder."))+" ")]):e._e()},h=[],g=p(y,w,h,!1,null,null);const C=g.exports;export{C as default};

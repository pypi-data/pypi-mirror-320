[project]
name = "demonstrable-whisperx-service"
dynamic = ["version"]
authors = [
  { name = "Sixty North AS", email = "systems+demonstrable-whisperx-service@sixty-north.com" },
]
description = "A standalone service for transcribing audio files using WhisperX"
readme = { file = "README.rst", content-type = "text/x-rst" }
license = { file = "LICENSE.rst" }
classifiers = [
  "Development Status :: 3 - Alpha",
  "Operating System :: OS Independent",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3 :: Only",
]
requires-python = ">=3.10.15,<3.11"
# All the dependencies are pinned here to ensure that the service can be installed in an isolated
# environment with a specific Python interpreter, and we know exactly what versions of the dependencies
# are being used.
dependencies = [
  "aiohappyeyeballs==2.4.4",
  "aiohttp==3.11.11",
  "aiosignal==1.3.2",
  "alembic==1.14.0",
  "antlr4-python3-runtime==4.9.3",
  "asteroid-filterbanks==0.4.0",
  "async-timeout==5.0.1",
  "attrs==24.3.0",
  "audioread==3.0.1",
  "av==11.0.0",
  "certifi==2024.12.14",
  "cffi==1.17.1",
  "charset-normalizer==3.4.1",
  "click==8.1.8",
  "coloredlogs==15.0.1",
  "colorlog==6.9.0",
  "contourpy==1.3.1",
  "ctranslate2==4.4.0",
  "cycler==0.12.1",
  "decorator==5.1.1",
  "docopt==0.6.2",
  "einops==0.8.0",
  "faster-whisper==1.0.0",
  "filelock==3.16.1",
  "flatbuffers==24.12.23",
  "fonttools==4.55.3",
  "frozenlist==1.5.0",
  "fsspec==2024.12.0",
  "huggingface-hub==0.27.1",
  "humanfriendly==10.0",
  "HyperPyYAML==1.2.2",
  "idna==3.10",
  "Jinja2==3.1.5",
  "joblib==1.4.2",
  "julius==0.2.7",
  "kiwisolver==1.4.8",
  "lazy_loader==0.4",
  "librosa==0.10.2.post1",
  "lightning==2.5.0.post0",
  "lightning-utilities==0.11.9",
  "llvmlite==0.43.0",
  "Mako==1.3.8",
  "markdown-it-py==3.0.0",
  "MarkupSafe==3.0.2",
  "matplotlib==3.10.0",
  "mdurl==0.1.2",
  "mpmath==1.3.0",
  "msgpack==1.1.0",
  "multidict==6.1.0",
  "networkx==3.4.2",
  "nltk==3.9.1",
  "numba==0.60.0",
  "numpy==1.26.4",
  "omegaconf==2.3.0",
  "onnxruntime==1.20.1",
  "optuna==4.1.0",
  "packaging==24.2",
  "pandas==2.2.3",
  "pillow==11.1.0",
  "platformdirs==4.3.6",
  "pooch==1.8.2",
  "primePy==1.3",
  "propcache==0.2.1",
  "protobuf==5.29.3",
  "pyannote.audio==3.1.1",
  "pyannote.core==5.0.0",
  "pyannote.database==5.1.1",
  "pyannote.metrics==3.2.1",
  "pyannote.pipeline==3.0.1",
  "pycparser==2.22",
  "Pygments==2.19.1",
  "pyparsing==3.2.1",
  "python-dateutil==2.9.0.post0",
  "pytorch-lightning==2.5.0.post0",
  "pytorch-metric-learning==2.8.1",
  "pytz==2024.2",
  "PyYAML==6.0.2",
  "regex==2024.11.6",
  "requests==2.32.3",
  "rich==13.9.4",
  "ruamel.yaml==0.18.10",
  "ruamel.yaml.clib==0.2.12",
  "safetensors==0.5.2",
  "scikit-learn==1.6.1",
  "scipy==1.15.1",
  "semver==3.0.2",
  "sentencepiece==0.2.0",
  "shellingham==1.5.4",
  "six==1.17.0",
  "sortedcontainers==2.4.0",
  "soundfile==0.13.0",
  "soxr==0.5.0.post1",
  "speechbrain==1.0.2",
  "SQLAlchemy==2.0.37",
  "srt==3.5.3",
  "sympy==1.13.1",
  "tabulate==0.9.0",
  "tensorboardX==2.6.2.2",
  "threadpoolctl==3.5.0",
  "tokenizers==0.15.2",
  "torch==2.5.1",
  "torch-audiomentations==0.11.2",
  "torch_pitch_shift==1.2.5",
  "torchaudio==2.5.1",
  "torchmetrics==1.6.1",
  "tqdm==4.67.1",
  "transformers==4.39.3",
  "typer==0.15.1",
  "typing_extensions==4.12.2",
  "tzdata==2024.2",
  "urllib3==2.3.0",
  "whisperx==3.2.0",
  "yarl==1.18.3",

]

[project.scripts]
demonstrable-whisperx-service = "demonstrable.whisperx_service.cli:main"

[project.optional-dependencies]
dev = ["ruff", "bump-my-version"]
test = ["hypothesis", "pytest", "coverage"]

[project.urls]
repository = "https://bitbucket.org/sixty-north/demonstrable-whisperx-service"

[tool.setuptools.dynamic]
version = { attr = "demonstrable.whisperx_service.__version__" }

[tool.setuptools.packages.find]
where = ["source"]

[tool.pytest.ini_options]
minversion = "6.0"
testpaths = ["tests"]
norecursedirs = "tests/helpers"

[tool.black]
line-length = 120
exclude = '''
/(
    \.git
  | \.hypothesis
  | \.tox
  | \.vscode
  | \.venv
  | \__pycache__
  | build
  | dist
  | docs
)/
'''

[tool.isort]
profile = "black"

[tool.ruff]
line-length = 120

[tool.pylint]
max-line-length = 120

[tool.bumpversion]
current_version = "3.0.0"
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"
serialize = ["{major}.{minor}.{patch}"]
tag = true
commit = true
message = "Bump version: {current_version} → {new_version}"
tag_name = "v{new_version}"
tag_message = "Bump version: {current_version} → {new_version}"

[[tool.bumpversion.files]]
filename = "source/demonstrable/whisperx_service/__init__.py"

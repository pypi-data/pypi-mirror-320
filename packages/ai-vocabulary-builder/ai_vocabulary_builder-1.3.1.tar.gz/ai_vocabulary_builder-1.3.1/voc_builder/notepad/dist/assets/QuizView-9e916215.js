import{d as Q,r as n,m as S,o as M,e as l,f as e,g as A,q as I,h as w,w as L,v as T,j as h,t as r,u as V,F as E,i as W,b as y,l as c,p as P,c as j}from"./index-be86b799.js";import{L as D}from"./LearnNav-58541969.js";const O={class:"row mt-4"},B={class:"col-12"},F={class:"row mt-2"},U={class:"cols-12"},Y=e("div",{class:"alert alert-info mt-2",role:"alert"}," Master words through quizzes! ",-1),$={class:"d-flex align-items-center"},G=e("i",{class:"bi bi-pencil"},null,-1),H=e("span",{class:"ms-4"},"Use",-1),J=e("option",{value:"5"},"5",-1),K=e("option",{value:"10"},"10",-1),R=e("option",{value:"25"},"25",-1),X=e("option",{value:"50"},"50",-1),Z=[J,K,R,X],ee=e("span",{class:"ms-2"},"Words",-1),te={class:"row"},se={class:"cols-12"},oe=e("hr",{class:"mt-3"},null,-1),ae={key:0,class:"alert alert-danger mt-2",role:"alert"},ie={key:1,id:"quiz-word-card"},ne={key:0,class:"mt-2 mb-1 word-orig-text"},le={class:"choices list-group"},re=["onClick"],ce={class:"quiz-progress"},ue={key:2,id:"quiz-finished"},de=e("i",{class:"bi bi-trophy-fill celebration-icon"},null,-1),_e=e("h3",null,"Congratulation!",-1),ve=e("div",null,"You've completed all the quizzes!",-1),he=[de,_e,ve],we=Q({__name:"QuizView",setup(me){const v=n("notStarted"),m=n(!1),p=n(5),a=S([]),i=n(null),g=n([]),u=n(null),d=n(!1);async function z(){try{const t=await y.get(window.API_ENDPOINT+"/api/system_status");m.value=t.data.quiz_mode_available}catch(t){console.log(t)}}async function b(t){try{return(await y.get(window.API_ENDPOINT+"/api/quiz/words/",{params:{words_num:t.value}})).data}catch(o){const s=o.response?o.response.data.message:o.message;return j.error("Failed to load settings, details: "+s),null}}async function x(){const t=await b(p);t&&(a.length=0,a.push(...t),u.value=1,i.value=a[0],f(),v.value="doing")}function k(t){const o=g.value[t]===i.value.simple_definition,s=document.querySelectorAll(".list-group-item")[t];o?q():(s.classList.add("list-group-item-danger"),s.classList.add("bounce"),setTimeout(()=>{s.classList.remove("bounce")},1e3))}function q(){if(u.value>=a.length){v.value="done";return}u.value++,i.value=a[u.value-1],f()}function f(){g.value=C(),d.value=!1,document.querySelectorAll(".list-group-item").forEach(t=>t.classList.remove("list-group-item-danger"))}function C(){const t=[],o=new Set;for(;o.size<3;){const s=Math.floor(Math.random()*a.length);s!==u.value-1&&o.add(s)}o.forEach(s=>{t.push(a[s].simple_definition)}),t.push(i.value.simple_definition);for(let s=t.length-1;s>0;s--){const _=Math.floor(Math.random()*(s+1));[t[s],t[_]]=[t[_],t[s]]}return t}M(()=>{z()});function N(){d.value=!d.value}return(t,o)=>(c(),l("div",null,[e("div",O,[e("div",B,[A(D,{activePanel:"quiz"})])]),e("div",F,[e("div",U,[Y,e("div",$,[e("button",{type:"button",class:I(["btn btn-primary",{disabled:!m.value}]),id:"start-quiz",onClick:x},[G,w(" Start Quiz ")],2),H,L(e("select",{class:"form-select ms-2","onUpdate:modelValue":o[0]||(o[0]=s=>p.value=s),style:{width:"100px"}},Z,512),[[T,p.value]]),ee])])]),e("div",te,[e("div",se,[oe,m.value?h("",!0):(c(),l("div",ae," You don't have enough words yet. Gather some more and come back! ")),v.value==="doing"?(c(),l("div",ie,[e("h4",null,[w(r(i.value.word)+" ",1),e("i",{class:"bi bi-volume-up ms-2",onClick:o[1]||(o[1]=s=>V(P)(i.value.word)),style:{cursor:"pointer"}})]),e("div",null,r(i.value.pronunciation),1),d.value?(c(),l("p",ne,r(i.value.orig_text),1)):h("",!0),e("a",{class:"mb-2",href:"javascript:void(0)",onClick:N},r(d.value?"hide example":"show example"),1),e("div",le,[(c(!0),l(E,null,W(g.value,(s,_)=>(c(),l("a",{href:"javascript:void(0)",class:"list-group-item list-group-item-action",onClick:pe=>k(_),key:_},r(s),9,re))),128))]),e("div",ce,r(u.value)+" / "+r(a.length),1)])):h("",!0),v.value==="done"?(c(),l("div",ue,he)):h("",!0)])])]))}});export{we as default};

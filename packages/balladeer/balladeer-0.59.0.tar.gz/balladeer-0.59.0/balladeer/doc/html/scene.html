<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Scenes &#8212; Balladeer 0.51.0</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=be3822b2" />
    <link rel="stylesheet" type="text/css" href="_static/balladeer_doc_style.css?v=88dc6569" />
    <link rel="stylesheet" href="_static/balladeer_doc_style.css" type="text/css" />
    <script src="_static/documentation_options.js?v=b8ab9f72"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interaction" href="interaction.html" />
    <link rel="prev" title="Story" href="story.html" />
    <meta name="referrer" content="strict-origin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Balladeer</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="entity.html">Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="world.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="map.html">Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech.html">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="drama.html">Drama</a></li>
<li class="toctree-l1"><a class="reference internal" href="story.html">Story</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scenes</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction.html">Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">Themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
</ul>
<p>
<br>
<a class="github-button" href="https://github.com/tundish/balladeer/issues"
data-color-scheme="no-preference: light; light: light; dark: dark;"
data-size="large" aria-label="View Balladeer issues on GitHub">GitHub Issues</a>
</p>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="story.html" title="Previous document">Story</a>
        </li>
        <li>
          <a href="interaction.html" title="Next document">Interaction</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="scenes">
<h1>Scenes<a class="headerlink" href="#scenes" title="Link to this heading">¶</a></h1>
<p>We saw in a <a class="reference internal" href="drama.html#drama-section"><span class="std std-ref">previous section</span></a> how you can generate Speech programmatically
from a <code class="xref py py-class docutils literal notranslate"><span class="pre">Drama</span></code> object.</p>
<p>That’s only half the picture though. Most of the time you’d want to pick Speech out of a text file, where
it’s easier to edit and maintain.</p>
<p>Balladeer uses the TOML format to store scene dialogue.
Scene file names end in <cite>“.scene.toml”</cite>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Please read the <a class="reference external" href="https://toml.io/en/v1.0.0">documentation for TOML</a>.
Spend a few minutes to become familiar with its format.</p>
</div>
<section id="specifications">
<h2>Specifications<a class="headerlink" href="#specifications" title="Link to this heading">¶</a></h2>
<p>The top of the scene file is the place to put <em>specifications</em> for the scene.
It consists of a TOML table for each of the Entities you want to cast into the scene.
Each table name should be in upper case. This is the role name. The specifications for the role
determine which entities get cast for the role.</p>
<p>In order to fulfil the role, an entity must match attributes with the specification. You can use three
criteria:</p>
<blockquote>
<div><dl class="simple">
<dt>type</dt><dd><p>The value of the <code class="docutils literal notranslate"><span class="pre">type</span></code> specification must appear in the entity <cite>types</cite> attribute,
or else be the name of the entity’s natural Python type.</p>
</dd>
<dt>state</dt><dd><p>The value of the <code class="docutils literal notranslate"><span class="pre">state</span></code> specification must be a string which specifies the
dotted name of a required state, or an integer in the case of <em>int</em> state.</p>
</dd>
<dt>states.X</dt><dd><p>The second part of the dotted name for the specification is the name of a State.
The value of a <code class="docutils literal notranslate"><span class="pre">states.X</span></code> specification is a list of strings giving the state values which
are valid for each role.</p>
</dd>
</dl>
</div></blockquote>
<p>Here’s the specification for one of the scene files in Balladeer’s <em>Cloak of Darkness</em> <a class="reference external" href="https://github.com/tundish/balladeer/tree/master/balladeer/examples/ex_11_inventory_compass">example</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DRAMA</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;Adventure&quot;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;Spot.foyer&quot;</span>

<span class="p">[</span><span class="n">GARMENT</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;Clothing&quot;</span>

</pre></div>
</div>
</section>
<section id="shots">
<h2>Shots<a class="headerlink" href="#shots" title="Link to this heading">¶</a></h2>
<p>The rest of the scene file consists of a <a class="reference external" href="https://toml.io/en/v1.0.0#array-of-tables">table array</a> of shots. The key for the shot array is an underscore,
<code class="docutils literal notranslate"><span class="pre">_</span></code>. The speech in the shot is defined as a multiline string with the key <code class="docutils literal notranslate"><span class="pre">s</span></code>.</p>
<p>In other words, something that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;PHONE.announcing@GUEST,STAFF&gt; Ring riiing!</span>

<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="conditions">
<h2>Conditions<a class="headerlink" href="#conditions" title="Link to this heading">¶</a></h2>
<p>Each shot may have one or more <em>conditions</em> attached to it which determine whether or not the speech is voiced.
The format for conditions is the same as for <a class="reference internal" href="#specifications">specifications</a>, except that the keys are preceded with <code class="docutils literal notranslate"><span class="pre">if.ROLE</span></code>.</p>
<p>Here’s an example from <em>Cloak of Darkness</em>. The shot has a single condition, specifying multiple values for
one state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;hint&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  This shell of a building is what&#39;s left of a hotel.</span>
<span class="s2">&lt;&gt;  The room has been stripped of all it once contained.</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>You can have multiple conditions which apply to different roles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;held&quot;</span><span class="p">]</span>
<span class="k">if</span><span class="o">.</span><span class="n">GARMENT</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Spot</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;inventory&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  You are wearing a long cloak, which gathers around you.</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Link to this heading">¶</a></h2>
<p>For reference, so you can understand the link between scene syntax and TOML structure, here’s an
entire scene file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DRAMA</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;Adventure&quot;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;Spot.foyer&quot;</span>

<span class="p">[</span><span class="n">GARMENT</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;Clothing&quot;</span>

<span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;hint&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  This shell of a building is what&#39;s left of a hotel.</span>
<span class="s2">&lt;&gt;  The room has been stripped of all it once contained.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;here&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  Right here would have been a foyer.</span>
<span class="s2">    You can see the footprint of a grand reception desk running down one side</span>
<span class="s2">    of the floor.</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hint&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  Try these commands:</span>

<span class="s2">    + &#39;Look&#39; to see more detail.</span>
<span class="s2">    + &#39;Inventory&#39; to learn what you are carrying.</span>
<span class="s2">    + &#39;Go&#39; to travel in a certain direction.</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="p">[[</span><span class="n">_</span><span class="p">]]</span>
<span class="k">if</span><span class="o">.</span><span class="n">DRAMA</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Detail</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;held&quot;</span><span class="p">]</span>
<span class="k">if</span><span class="o">.</span><span class="n">GARMENT</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">Spot</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;inventory&quot;</span><span class="p">]</span>
<span class="n">s</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;&gt;  You are wearing a long cloak, which gathers around you.</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>… and here’s how Balladeer reads it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;DRAMA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;Spot.foyer&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Adventure&#39;</span><span class="p">},</span>
    <span class="s1">&#39;GARMENT&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Clothing&#39;</span><span class="p">},</span>
    <span class="s1">&#39;_&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;if&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;DRAMA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Detail&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="s1">&#39;hint&#39;</span><span class="p">]}}},</span>
        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;&gt;  This shell of a building is what&#39;s left of a hotel.</span><span class="se">\n</span><span class="s2">&quot;</span>
             <span class="s1">&#39;&lt;&gt;  The room has been stripped of all it once contained.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;if&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;DRAMA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Detail&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;here&#39;</span><span class="p">]}}},</span>
        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&gt;  Right here would have been a foyer.</span><span class="se">\n</span><span class="s1">&#39;</span>
             <span class="s1">&#39;    You can see the footprint of a grand reception desk running down one side</span><span class="se">\n</span><span class="s1">&#39;</span>
             <span class="s1">&#39;    of the floor.</span><span class="se">\n</span><span class="s1">&#39;</span>
             <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;if&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;DRAMA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Detail&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;hint&#39;</span><span class="p">]}}},</span>
        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&gt;  Try these commands:</span><span class="se">\n</span><span class="s1">&#39;</span>
             <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
             <span class="s2">&quot;    + &#39;Look&#39; to see more detail.</span><span class="se">\n</span><span class="s2">&quot;</span>
             <span class="s2">&quot;    + &#39;Inventory&#39; to learn what you are carrying.</span><span class="se">\n</span><span class="s2">&quot;</span>
             <span class="s2">&quot;    + &#39;Go&#39; to travel in a certain direction.</span><span class="se">\n</span><span class="s2">&quot;</span>
             <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;if&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;DRAMA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Detail&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;held&#39;</span><span class="p">]}},</span>
               <span class="s1">&#39;GARMENT&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Spot&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;inventory&#39;</span><span class="p">]}}},</span>
        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&gt;  You are wearing a long cloak, which gathers around you.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="story.html" title="Previous document">Story</a>
        </li>
        <li>
          <a href="interaction.html" title="Next document">Interaction</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    
    <div class="footer">
      &copy;2023, D E Haynes.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/scene.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script async defer src="https://buttons.github.io/buttons.js"></script>

  </body>
</html>